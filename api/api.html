<!--Autogenerated using pandoc <md files> -o <outfile.html> --toc --template template.html5 --css style.css  --section-divs -->

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>AdHawk SDK</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <div>
    <div id="ah-sidebar">
      <ul id="toc">
                <ul><li><a href="#overview">Overview</a><ul><li><a href="#communication-protocol">Communication protocol</a></li><li><a href="#control-interface">Control interface</a></li><li><a href="#stream-interface">Stream interface</a></li><li><a href="#backend-service">Backend service</a></li></ul></li><li><a href="#getting-started">Getting started</a><ul><li><a href="#installation">Installation</a><ul><li><a href="#python-sdk">Python SDK</a></li><li><a href="#c-sdk">C SDK</a></li></ul></li><li><a href="#starting-the-sdk">Starting the SDK</a></li><li><a href="#auto-tune">Auto-tune</a></li><li><a href="#calibrate">Calibrate</a><ul><li><a href="#using-backend-built-in-calibration-procedure-with-gui">Using backend built-in calibration procedure with GUI</a></li></ul></li><li><a href="#enable-data-streams">Enable data streams</a></li><li><a href="#saving-calibrations">Saving calibrations</a></li><li><a href="#gaze-in-image">Gaze in image</a></li><li><a href="#screen-tracking">Screen tracking</a></li></ul></li><li><a href="#api-reference">API reference</a><ul><li><a href="#control-packets">Control packets</a><ul><li><a href="#calibration-start-0x81">Calibration start [0x81]</a></li><li><a href="#calibration-complete-0x82">Calibration complete [0x82]</a></li><li><a href="#calibration-abort-0x83">Calibration abort [0x83]</a></li><li><a href="#register-calibration-point-0x84">Register calibration point [0x84]</a></li><li><a href="#trigger-auto-tune-0x85">Trigger Auto-tune [0x85]</a></li><li><a href="#re-center-calibration-0x8f">Re-center calibration [0x8f]</a></li><li><a href="#get-tracker-status-0x90">Get tracker status [0x90]</a></li><li><a href="#start-camera-0xd2">Start camera [0xd2]</a></li><li><a href="#stop-camera-0xd3">Stop camera [0xd3]</a></li><li><a href="#subscribe-to-video-stream-0xd4">Subscribe to video stream [0xd4]</a></li><li><a href="#unsubscribe-from-video-stream-0xd5">Unsubscribe from video stream [0xd5]</a></li><li><a href="#register-screen-aruco-board-0xda">Register screen ArUco board [0xda]</a></li><li><a href="#screen-tracking-start-0xdb">Screen tracking start [0xdb]</a></li><li><a href="#screen-tracking-stop-0xdc">Screen tracking stop [0xdc]</a></li></ul></li><li><a href="#run-time-configuration-objects-blobs">Run-time configuration objects (blobs)</a><ul><li><a href="#blob-size-0x92">Blob size [0x92]</a></li><li><a href="#blob-data-0x93">Blob data [0x93]</a></li><li><a href="#load-blob-0x94">Load blob [0x94]</a></li><li><a href="#save-blob-0x95">Save blob [0x95]</a></li></ul></li><li><a href="#properties">Properties</a><ul><li><a href="#get-autotune-position-0x9a-0x01">Get autotune position [0x9a, 0x01]</a></li><li><a href="#set-autotune-position-0x9b-0x01">Set autotune position [0x9b, 0x01]</a></li><li><a href="#set-stream-control-0x9b-0x02">Set stream control [0x9b, 0x02]</a></li><li><a href="#get-stream-control-0x9a-0x02">Get stream control [0x9a, 0x02]</a></li><li><a href="#get-component-offsets-0x9a-0x04">Get component offsets [0x9a, 0x04]</a></li><li><a href="#set-component-offsets-0x9b-0x04">Set component offsets [0x9b, 0x04]</a></li><li><a href="#set-event-control-0x9b-0x05">Set event control [0x9b, 0x05]</a></li><li><a href="#get-event-control-0x9a-0x05">Get event control [0x9a, 0x05]</a></li><li><a href="#get-normalized-eye-offsets-0x9a-0x09">Get normalized eye offsets [0x9a, 0x09]</a></li></ul></li><li><a href="#system-control">System control</a><ul><li><a href="#enable-disable-eye-tracking-0x9c-0x01">Enable / disable Eye Tracking [0x9c, 0x01]</a></li></ul></li><li><a href="#device-setup-procedures">Device setup procedures</a><ul><li><a href="#trigger-device-calibration-0xb0-0x01">Trigger device calibration [0xb0, 0x01]</a></li><li><a href="#get-device-calibration-status-0xb1-0x01">Get device calibration status [0xb1, 0x01]</a></li><li><a href="#trigger-update-firmware-0xb0-0x02">Trigger update firmware [0xb0, 0x02]</a></li><li><a href="#get-update-firmware-status-0xb1-0x02">Get update firmware status [0xb1, 0x02]</a></li></ul></li><li><a href="#marker-sequence-procedures">Marker sequence procedures</a><ul><li><a href="#calibration-gui-start-0xb0-0x03">Calibration GUI start [0xb0, 0x03]</a></li><li><a href="#get-calibration-gui-status-0xb1-0x03">Get calibration GUI status [0xb1, 0x03]</a></li><li><a href="#validation-gui-start-0xb0-0x04">Validation GUI start [0xb0, 0x04]</a></li><li><a href="#get-validation-gui-status-0xb1-0x04">Get validation GUI status [0xb1, 0x04]</a></li><li><a href="#auto-tune-gui-start-0xb0-0x05">Auto-tune GUI start [0xb0, 0x05]</a></li><li><a href="#get-auto-tune-gui-status-0xb1-0x05">Get Auto-tune GUI status [0xb1, 0x05]</a></li><li><a href="#quick-start-gui-start-0xb0-0x06">Quick Start GUI start [0xb0, 0x06]</a></li><li><a href="#get-quick-start-gui-status-0xb1-0x06">Get Quick Start GUI Status [0xb1, 0x06]</a></li></ul></li><li><a href="#camera-user-settings">Camera user settings</a><ul><li><a href="#set-gaze-depth-0xd0-0x01">Set gaze depth [0xd0, 0x01]</a></li><li><a href="#enabledisable-parallax-correction-0xd0-0x02">Enable/disable parallax correction [0xd0, 0x02]</a></li><li><a href="#set-sampling-duration-0xd0-0x03">Set sampling duration [0xd0, 0x03]</a></li></ul></li><li><a href="#backend-service-communication">Backend service communication</a><ul><li><a href="#register-endpoint-0xc0">Register endpoint [0xc0]</a></li><li><a href="#deregister-endpoint-0xc2">Deregister endpoint [0xc2]</a></li><li><a href="#ping-endpoint-0xc5">Ping endpoint [0xc5]</a></li></ul></li><li><a href="#data-streams">Data Streams</a><ul><li><a href="#tracker-ready-0x02">Tracker ready [0x02]</a></li><li><a href="#gaze-vector-stream-0x03">Gaze vector stream [0x03]</a></li><li><a href="#pupil-position-stream-0x04">Pupil position stream [0x04]</a></li><li><a href="#pupil-diameter-stream-0x05">Pupil diameter stream [0x05]</a></li><li><a href="#per-eye-gaze-vector-stream-0x06">Per-eye gaze vector stream [0x06]</a></li><li><a href="#gaze-in-image-stream-0x07">Gaze in image stream [0x07]</a></li><li><a href="#gaze-in-screen-stream-0x08">Gaze in screen stream [0x08]</a></li><li><a href="#imu-data-stream-0x17">IMU data stream [0x17]</a></li><li><a href="#imu-rotation-data-stream-0x19">IMU rotation data stream [0x19]</a></li></ul></li><li><a href="#events">Events</a><ul><li><a href="#blink-events">Blink events</a></li><li><a href="#trackloss-events">Trackloss events</a></li><li><a href="#saccade-events">Saccade Events</a></li></ul></li><li><a href="#types-reference">Types reference</a><ul><li><a href="#return-codes">Return codes</a></li><li><a href="#stream-control-bitmask">Stream control bitmask</a></li><li><a href="#event-control-bitmask">Event control bitmask</a></li><li><a href="#blob-type">Blob type</a></li><li><a href="#supported-rates">Supported rates</a></li><li><a href="#camera-resolution">Camera resolution</a></li><li><a href="#procedure-types">Procedure types</a></li><li><a href="#marker-sequence-mode">Marker sequence mode</a></li><li><a href="#camera-user-setting-types">Camera user setting types</a></li></ul></li></ul></li><li><a href="#extended-usage-notes">Extended usage notes</a><ul><li><a href="#python-sdk-1">Python SDK</a><ul><li><a href="#synchronous-vs-asynchronous-operation">Synchronous vs asynchronous operation</a></li></ul></li></ul></li><li><a href="#adhawk-coordinate-system">AdHawk coordinate system</a><ul><li><a href="#image-coordinate-system">Image coordinate system</a></li><li><a href="#screen-coordinate-system">Screen coordinate system</a></li></ul></li><li><a href="#changelog">Changelog</a><ul><li><a href="#v5.8">v5.8</a></li><li><a href="#v5.9">v5.9</a></li><li><a href="#v5.11">v5.11</a></li></ul></li></ul>
              </ul>
    </div>
    <div id="ah-main">
<!--https://stackoverflow.com/questions/42773587/code-block-formatting-issues-with-bootstrap-and-pandoc-->
<section id="overview" class="level1"><h1>Overview</h1><p>The purpose of this document is to describe the APIs used to interface with AdHawk’s Eye Tracking module.</p><p>Communication with the AdHawk Eye Tracking module can be accomplished via:</p><ol type="1"><li><p>AdHawk API <a href="#communication-protocol">Communication protocol</a></p></li><li><p>C SDK, which is built on top of the communication protocol and communicates with the device directly over USB or SPI.</p></li></ol><figure><img src="./assets/c_sdk_direct.png" width="600" alt="" /><figcaption>C SDK via USB or SPI</figcaption></figure><ol start="3" type="1"><li>Python SDK, which is built on top of the communication protocol, but proxies commands through the <a href="#backend-service">AdHawk Backend Service</a>. The C SDK can also be set up to proxy commands in this fashion. The advantage of running in this mode is that multiple apps can be run at the same time.</li></ol><figure><img src="./assets/python_c_sdk_via_backend.png" width="600" alt="" /><figcaption>Python or C SDK via Backend</figcaption></figure><section id="communication-protocol" class="level2"><h2>Communication protocol</h2><p>The communication packets consist of a packet type followed by zero or more data bytes:</p><table><thead><tr class="header"><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">The packet type</td></tr><tr class="even"><td style="text-align: left;">1…</td><td style="text-align: left;">…</td><td style="text-align: left;">Payload</td></tr></tbody></table><ul><li>The length of payload is variable depending on the packet type</li><li>All values are stored in little endian (least significant byte first)</li></ul></section><section id="control-interface" class="level2"><h2>Control interface</h2><p>The control interface provides the ability to interact with AdHawk’s Eye Tracking module. The client/host initiates a command over the control interface by sending a request packet. The <a href="#control-packets">Control packets</a> section describes the list of available commands that the client/host can request over the control interface.</p><p>A request to the control interface may take up to 8 seconds to complete. All requests to the control interface will receive a response, either containing the requested information, or containing the result of the request. The clients should only issue one request at a time.</p><p>The responses that contain the result of the request consist of a 1-byte integer, where 0 indicates no error and successful execution of the requested command, and a non-zero value denotes the nature of error encountered while servicing the request. See the <a href="#return-codes">return codes</a> section for details.</p></section><section id="stream-interface" class="level2"><h2>Stream interface</h2><p>AdHawk’s Eye Tracking module streams status and tracking data. Some streams like the <a href="#tracker-ready-0x02">tracker ready</a> signal is always broadcasted. Other streams, such as the <a href="#gaze-vector-stream-0x03">gaze vector stream</a>, must be subscribed to.</p></section><section id="backend-service" class="level2"><h2>Backend service</h2><p>The AdHawk Backend Service is the PC host component that communicates with AdHawk’s eye tracking hardware over USB, and allows multiple clients to interact with and receive data from the eye tracking module. In order to support multiple clients simultaneously, all communications between clients and the Backend Service is performed using UDP sockets. There are two sockets: control and data.</p><p>The control socket is constant, and is configured to 11032. The backend service is always listening on the control socket for client requests, and the responses to those requests are sent back to the source UDP port that was specified in the request packet.</p><p>The data socket is used to stream periodic eye tracking data to clients. Each client specifies its data port by sending a <a href="#register-endpoint-0xc0">register endpoint</a> packet to the control socket. The client data port may be the same as its control data port if desired.</p></section></section><section id="getting-started" class="level1"><h1>Getting started</h1><section id="installation" class="level2"><h2>Installation</h2><section id="python-sdk" class="level3"><h3>Python SDK</h3><div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">pip</span> install adhawk_py_sdk-<span class="op">&lt;</span>version<span class="op">&gt;</span>.tar.gz</span></code></pre></div></section><section id="c-sdk" class="level3"><h3>C SDK</h3><p>Refer to the README.md in the C SDK package</p></section></section><section id="starting-the-sdk" class="level2"><h2>Starting the SDK</h2><p>If communicating with the <a href="#backend-service">AdHawk Backend Service</a>, a communication channel must be established over UDP. Start by registering as an endpoint by sending the <a href="#register-endpoint-0xc0">register endpoint</a> packet with the UDP port of the peer.</p><p>If using the Python SDK, this is handled by the FrontendApi and can be accomplished as follows:</p><div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">import</span> adhawkapi</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="im">import</span> adhawkapi.frontend</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">def</span> on_connect(error):</span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="cf">if</span> <span class="kw">not</span> error:</span>
<span id="cb2-6"><a href="#cb2-6"></a>        <span class="bu">print</span>(<span class="st">&#39;Connected to AdHawk Backend Service&#39;</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="kw">def</span> on_disconnect(error):</span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="bu">print</span>(<span class="st">&#39;Disconnected from AdHawk Backend Service&#39;</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a>api <span class="op">=</span> adhawkapi.frontend.FrontendApi()</span>
<span id="cb2-12"><a href="#cb2-12"></a>api.start(connect_cb<span class="op">=</span>on_connect, disconnect_cb<span class="op">=</span>on_disconnect)</span>
<span id="cb2-13"><a href="#cb2-13"></a>...</span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co"># Terminate communication</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>api.shutdown()</span></code></pre></div><p>The C SDK only requires the <a href="#backend-service">AdHawk Backend Service</a> when running in UDP mode. The USB and SPI modes communicate directly with the device and do not require the <a href="#backend-service">AdHawk Backend Service</a>. The API initialization call will take care of all setup required depending on the specified mode. See <code>ah_com.h</code> for details on how to connect in different modes</p><div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a>ah_api_init(params)</span></code></pre></div></section><section id="auto-tune" class="level2"><h2>Auto-tune</h2><p>To tune the device, send the <a href="#trigger-autotune-0x85">trigger autotune</a> packet while the user is looking straight ahead. The response indicates whether the Auto-Tune procedure was successful.</p><p><strong>C</strong></p><div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a>ah_result ah_api_runAutotune(ah_autotuneReferenceGazeVector *referenceGazeVec);</span></code></pre></div><p><strong>Python</strong></p><div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>api.trigger_autotune(reference_gaze_vector)</span></code></pre></div><p>The caller can optionally provide a reference gaze vector to <a href="#trigger-autotune-0x85">trigger autotune</a> for more accurate results. The reference gaze vector is a 3-dimensional vector representing the point in world space the user is looking at during the tuning procedure. It consists of an X, Y, and Z component (all values are expected to be in meters).</p></section><section id="calibrate" class="level2"><h2>Calibrate</h2><p>Once the <a href="#tracker-ready-0x02">tracker ready</a> signal is received or <a href="#get-tracker-status-0x90">get tracker status</a> returns success, the device is ready to be calibrated.</p><p>Calibration is the process of mapping the eye tracking signal to an individual’s visual axis, which makes the eye tracking output meaningful for typical applications. To initiate the calibration procedure send a <a href="#calibration-start-0x81">calibration start</a> packet.</p><p>The calibration procedure consists of the collection of a set of X, Y, Z gaze references. The gaze references are collected by instructing the user to look at a prescribed point and signaling the registration of the calibration data point through a <a href="#register-calibration-point-0x84">register calibration point</a> packet. When registering a calibration data point, the client must instruct AdHawk’s eye-tracking module of the user’s expected gaze during the collection of the calibration point. The expected gaze is specified in the payload of the Register calibration data point packet. Note that a <a href="#return-codes">response</a> of ‘Left Eye Not Found’ or ‘Right Eye Not Found’ can be treated as a warning in binocular operation, but ‘Eyes Not Found’ is an error.</p><p>After collecting the data points, send the <a href="#calibration-complete-0x82">calibration complete</a> packet to indicate that no further points will be collected and that a new calibration should be generated.</p><p>Once the <a href="#calibration-complete-0x82">calibration complete</a> packet is received the eye-tracking module will compute the calibration coefficients based on the correspondence of sensor data and gaze references. The AdHawk’s eye-tracking module will respond with a zero (0) return code for successful calibration, and a non-zero value if calibration fails. See the <a href="#return-codes">return codes</a> section for details.</p><p>If calibration is successful, the device is capable of streaming the <a href="#gaze-vector-stream-0x03">gaze vector stream</a> and the <a href="#pupil-position-stream-0x04">pupil position stream</a>.</p><p><strong>C</strong></p><div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a>ah_api_calibrationStart();</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="cf">for</span> (<span class="dt">unsigned</span> i = <span class="dv">0</span>; i &lt; num_points; i++)</span>
<span id="cb6-3"><a href="#cb6-3"></a>{</span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="dt">float</span> x, y, z;</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="co">// As the eye moves and fixates on each point on the screen,</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="co">// register the position of the point</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="co">// get_reference_point(&amp;x, &amp;y, &amp;z);</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    ah_api_calibrationRegisterPoint(x, y, z);</span>
<span id="cb6-9"><a href="#cb6-9"></a>}</span>
<span id="cb6-10"><a href="#cb6-10"></a>ah_api_calibrationComplete();</span></code></pre></div><p><strong>Python</strong></p><div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="kw">def</span> grid_points(nrows, ncols, <span class="bu">xrange</span><span class="op">=</span><span class="dv">20</span>, yrange<span class="op">=</span><span class="fl">12.5</span>, xoffset<span class="op">=</span><span class="dv">0</span>, yoffset<span class="op">=</span><span class="fl">2.5</span>):</span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="co">&#39;&#39;&#39;Generates a grid of points based on range and number of rows/cols&#39;&#39;&#39;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    zpos <span class="op">=</span> <span class="op">-</span><span class="fl">0.6</span>  <span class="co"># typically 60cm to screen</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="co"># calculate x and y range for a xrange x yrange degree calibration window</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>    xmin, xmax <span class="op">=</span> np.tan(np.deg2rad([xoffset <span class="op">-</span> <span class="bu">xrange</span>, xoffset <span class="op">+</span> <span class="bu">xrange</span>])) <span class="op">*</span> np.<span class="bu">abs</span>(zpos)</span>
<span id="cb7-7"><a href="#cb7-7"></a>    ymin, ymax <span class="op">=</span> np.tan(np.deg2rad([yoffset <span class="op">-</span> yrange, yoffset <span class="op">+</span> yrange])) <span class="op">*</span> np.<span class="bu">abs</span>(zpos)</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>    cal_points <span class="op">=</span> []</span>
<span id="cb7-10"><a href="#cb7-10"></a>    <span class="cf">for</span> ypos <span class="kw">in</span> np.linspace(ymin, ymax, nrows):</span>
<span id="cb7-11"><a href="#cb7-11"></a>        <span class="cf">for</span> xpos <span class="kw">in</span> np.linspace(xmin, xmax, ncols):</span>
<span id="cb7-12"><a href="#cb7-12"></a>            cal_points.append((xpos, ypos, zpos))</span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a>    <span class="bu">print</span>(<span class="ss">f&#39;grid_points(): generated </span><span class="sc">{</span>nrows<span class="sc">}</span><span class="ss">x</span><span class="sc">{</span>ncols<span class="sc">}</span><span class="ss"> points&#39;</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>          <span class="ss">f&#39; </span><span class="sc">{</span><span class="bu">xrange</span><span class="sc">}</span><span class="ss">x</span><span class="sc">{</span>yrange<span class="sc">}</span><span class="ss"> deg box at </span><span class="sc">{</span>zpos<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>cal_points<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a>    <span class="cf">return</span> cal_points</span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a>npoints <span class="op">=</span> <span class="dv">9</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>nrows <span class="op">=</span> <span class="bu">int</span>(np.sqrt(npts))</span>
<span id="cb7-21"><a href="#cb7-21"></a>reference_points <span class="op">=</span> grid_points(nrows, nrows)</span>
<span id="cb7-22"><a href="#cb7-22"></a></span>
<span id="cb7-23"><a href="#cb7-23"></a>api.start_calibration()</span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="cf">for</span> point <span class="kw">in</span> reference_points:</span>
<span id="cb7-25"><a href="#cb7-25"></a>    <span class="co"># As the eye moves and fixates on each point on the screen,</span></span>
<span id="cb7-26"><a href="#cb7-26"></a>    <span class="co"># register the position of the point</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>    api.register_calibration_point(<span class="op">*</span>point)</span>
<span id="cb7-28"><a href="#cb7-28"></a>api.stop_calibration()</span></code></pre></div><section id="using-backend-built-in-calibration-procedure-with-gui" class="level3"><h3>Using backend built-in calibration procedure with GUI</h3><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><blockquote><p>Currently not supported in c sdk</p></blockquote><p>The calibration of gaze tracking can also be done with a graphical user interface provided by the AdHawk Backend Service that guides the user through the procedure. This API launches a built-in calibration screen provided by the AdHawk Backend service. The user needs to fixate at the center of a sequence of targets displayed on the screen and register the calibration samples. The GUI will be closed automatically at the end of the calibration. See <a href="#marker-sequence-procedures">Marker Sequence Procedures</a> for more details about the packet.</p><p><strong>Python</strong></p><div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a></span>
<span id="cb8-2"><a href="#cb8-2"></a>api.start_calibration_gui(mode<span class="op">=</span>adhawkapi.MarkerSequenceMode.FIXED_GAZE.value,</span>
<span id="cb8-3"><a href="#cb8-3"></a>                          n_points<span class="op">=</span><span class="dv">5</span>, marker_size_mm<span class="op">=</span><span class="dv">35</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>                          randomize<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb8-5"><a href="#cb8-5"></a>                          fov<span class="op">=</span>(<span class="dv">30</span>, <span class="dv">25</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">10</span>),</span>
<span id="cb8-6"><a href="#cb8-6"></a>                          callback<span class="op">=</span><span class="kw">lambda</span> <span class="op">*</span>x: <span class="va">None</span>)</span></code></pre></div></section></section><section id="enable-data-streams" class="level2"><h2>Enable data streams</h2><p>Once the device is calibrated, to start receiving eye tracking data from the device, send a <a href="#set-stream-control-0x9b-0x02">set stream control</a> packet with the stream you want to enable and the rate at which you want to enable it. See <a href="#supported-rates">Supported rates</a>.</p><p>At this point, the device will start streaming packets to the registered endpoint. The format of the streamed packets are listed in the <a href="#data-streams">Data Streams</a> section.</p><p><strong>C</strong></p><div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1"></a><span class="dt">static</span> <span class="dt">void</span> gazeDataCallback(<span class="dt">void</span> *data)</span>
<span id="cb9-2"><a href="#cb9-2"></a>{</span>
<span id="cb9-3"><a href="#cb9-3"></a>    ah_gazeStreamData *gaze = data;</span>
<span id="cb9-4"><a href="#cb9-4"></a>}</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a>ah_api_setupStream(ah_streamType_Gaze, ah_streamRate_60Hz, gazeDataCallback);</span></code></pre></div><p><strong>Python</strong></p><div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb10-2"><a href="#cb10-2"></a>    timestamp, xpos, ypos, zpos, vergence <span class="op">=</span> data</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE, gaze_handler)</span>
<span id="cb10-5"><a href="#cb10-5"></a>api.set_stream_control(adhawkapi.PacketType.GAZE, <span class="dv">60</span>)</span></code></pre></div></section><section id="saving-calibrations" class="level2"><h2>Saving calibrations</h2><p>Once a device has been calibrated, the calibration coefficients can be saved using the blobs framework. The blobs framework allows saving and restoring run-time configuration objects of the eye-tracking module.</p><p>Send a <a href="#save-blob-0x95">save blob</a> packet with the <a href="#blob-type">blob type</a> set to 1 (gaze calibration data). If the blob was saved successfully, a unique 32-bit identifier is returned in the response packet. The calibration can later be loaded by sending a <a href="#load-blob-0x94">load blob</a> packet with this ID in the payload.</p><p><strong>C</strong></p><div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1"></a>ah_api_calibrationSave();</span></code></pre></div><p><strong>Python</strong> &gt; Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p><div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>errcode, blob_id <span class="op">=</span> api.save_blob(adhawkapi.BlobType.CALIBRATION)</span></code></pre></div></section><section id="gaze-in-image" class="level2"><h2>Gaze in image</h2><blockquote><p>Currently not supported in c sdk</p></blockquote><p>While the main output of the gaze tracker is a stream of user’s gaze ray in 3d, the frontend can request a stream of (x, y) values as the projection of the gaze ray inside the image captured by the front-facing camera. This also assumes that the gaze tracker is already calibrated for the user.</p><p>To be able to see the gaze projection in the camera frame in realtime, you need to first <a href="#start-camera-0xd2">start the camera</a>. Once the camera is started and a success <a href="#return-codes">response code</a> is received you can <a href="#subscribe-for-video-stream-0xd4">subscribe for the video stream</a>. Starting the camera is needed for calculating the gaze projection based on the chosen image resolution, however you don’t necessarily need to subscribe for the video stream. Receiving the video stream only allows you to draw the image and overlay the gaze point on top of it.</p><p>In order to get the <a href="#gaze-in-image-stream-0x07">gaze-in-image stream</a> you need to subscribe for the stream and enable that stream. Note that you don’t need to subscribe for the <a href="#gaze-vector-stream-0x03">gaze vector</a> for this but the rate you will receive the gaze-in-image stream is the same rate that is set for the gaze vector stream.</p><p><strong>Python</strong></p><div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="im">import</span> adhawkapi.frontend</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="kw">def</span> handle_connect(error):</span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="cf">if</span> <span class="kw">not</span> error:</span>
<span id="cb13-6"><a href="#cb13-6"></a>        <span class="co"># trigger camera start</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>        api.start_camera_capture(camera_device_index, resolution_index, undistort_image, callback<span class="op">=</span>handle_camera_start_response)</span>
<span id="cb13-8"><a href="#cb13-8"></a></span>
<span id="cb13-9"><a href="#cb13-9"></a>        <span class="co"># register for gaze-in-image stream</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>        api.set_stream_control(api.PacketType.GAZE_IN_IMAGE, <span class="dv">1</span>, callback<span class="op">=</span>(<span class="kw">lambda</span> <span class="op">*</span>args: <span class="va">None</span>))</span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="kw">def</span> handle_camera_start_response(response):</span>
<span id="cb13-13"><a href="#cb13-13"></a>    <span class="cf">if</span> response:</span>
<span id="cb13-14"><a href="#cb13-14"></a>        <span class="bu">print</span>(<span class="ss">f&#39;camera start response: </span><span class="sc">{</span>response<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb13-15"><a href="#cb13-15"></a>    <span class="cf">else</span>:</span>
<span id="cb13-16"><a href="#cb13-16"></a>        start_video_stream()</span>
<span id="cb13-17"><a href="#cb13-17"></a></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="kw">def</span> start_video_stream():</span>
<span id="cb13-19"><a href="#cb13-19"></a>    <span class="co">&#39;&#39;&#39; Start the video streaming &#39;&#39;&#39;</span></span>
<span id="cb13-20"><a href="#cb13-20"></a>    api.start_video_stream(<span class="op">*</span>video_receiver.address, <span class="kw">lambda</span> <span class="op">*</span>x: <span class="va">None</span>)</span>
<span id="cb13-21"><a href="#cb13-21"></a></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="kw">def</span> frame_handler(timestamp, frame_index, image_buf):</span>
<span id="cb13-23"><a href="#cb13-23"></a>    <span class="co">&#39;&#39;&#39;</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">    display the image and overlay the gaze_xy point</span></span>
<span id="cb13-25"><a href="#cb13-25"></a></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">    example decoder 1: decode the image using opencv</span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">        image = cv2.imdecode(np.frombuffer(image_buf, dtype=np.uint8), 1)</span></span>
<span id="cb13-28"><a href="#cb13-28"></a></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">    example decoder 2: decode the image in pyqtgraph</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">        qt_img = QtGui.QPixmap()</span></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="co">        qt_img.loadFromData(image_buf, &#39;JPEG&#39;)</span></span>
<span id="cb13-32"><a href="#cb13-32"></a></span>
<span id="cb13-33"><a href="#cb13-33"></a><span class="co">    &#39;&#39;&#39;</span></span>
<span id="cb13-34"><a href="#cb13-34"></a>    <span class="cf">return</span></span>
<span id="cb13-35"><a href="#cb13-35"></a></span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="kw">def</span> handle_gaze_in_image_data(_timestamp, gaze_img_x, gaze_img_y, _deg_to_pix_x, _deg_to_pix_y):</span>
<span id="cb13-37"><a href="#cb13-37"></a>    <span class="co">&#39;&#39;&#39; Simple handler that prints the gaze coordinates &#39;&#39;&#39;</span></span>
<span id="cb13-38"><a href="#cb13-38"></a>    <span class="kw">global</span> gaze_xy</span>
<span id="cb13-39"><a href="#cb13-39"></a>    gaze_xy <span class="op">=</span> [gaze_img_x, gaze_img_y]</span>
<span id="cb13-40"><a href="#cb13-40"></a>    <span class="bu">print</span>(<span class="ss">f&#39;gaze coordinates in the image: </span><span class="sc">{</span>gaze_xy<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb13-41"><a href="#cb13-41"></a></span>
<span id="cb13-42"><a href="#cb13-42"></a><span class="kw">def</span> shutdown():</span>
<span id="cb13-43"><a href="#cb13-43"></a>    api.stop_video_stream(<span class="op">*</span>video_receiver.address, <span class="kw">lambda</span> <span class="op">*</span>x: <span class="va">None</span>)</span>
<span id="cb13-44"><a href="#cb13-44"></a>    api.stop_camera_capture(<span class="kw">lambda</span> <span class="op">*</span>_args: <span class="va">None</span>)</span>
<span id="cb13-45"><a href="#cb13-45"></a>    api.shutdown()</span>
<span id="cb13-46"><a href="#cb13-46"></a></span>
<span id="cb13-47"><a href="#cb13-47"></a>gaze_xy <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb13-48"><a href="#cb13-48"></a></span>
<span id="cb13-49"><a href="#cb13-49"></a><span class="co"># setup a video receiver</span></span>
<span id="cb13-50"><a href="#cb13-50"></a>video_receiver <span class="op">=</span> adhawkapi.frontend.VideoReceiver(frame_handler)</span>
<span id="cb13-51"><a href="#cb13-51"></a>video_receiver.start()</span>
<span id="cb13-52"><a href="#cb13-52"></a></span>
<span id="cb13-53"><a href="#cb13-53"></a><span class="co"># define the camera properties</span></span>
<span id="cb13-54"><a href="#cb13-54"></a>camera_device_index <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-55"><a href="#cb13-55"></a>resolution_index <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-56"><a href="#cb13-56"></a>undistort_image <span class="op">=</span> <span class="va">False</span></span>
<span id="cb13-57"><a href="#cb13-57"></a></span>
<span id="cb13-58"><a href="#cb13-58"></a><span class="co"># start</span></span>
<span id="cb13-59"><a href="#cb13-59"></a>api <span class="op">=</span> adhawkapi.frontend.FrontendApi()</span>
<span id="cb13-60"><a href="#cb13-60"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE_IN_IMAGE, handle_gaze_in_image_data)</span>
<span id="cb13-61"><a href="#cb13-61"></a>api.start(connect_cb<span class="op">=</span>handle_connect)</span>
<span id="cb13-62"><a href="#cb13-62"></a></span>
<span id="cb13-63"><a href="#cb13-63"></a><span class="co"># shutdown when you are done</span></span>
<span id="cb13-64"><a href="#cb13-64"></a>shutdown()</span></code></pre></div></section><section id="screen-tracking" class="level2"><h2>Screen tracking</h2><blockquote><p>Currently not supported in c sdk</p></blockquote><p>The Adhawk head-mounted eye tracker estimates the user’s gaze in 3d (as well as the <a href="#gaze-in-image">projection in the image</a>), whereas majority of the table-mounted eye trackers estimate the gaze as a point inside the screen coordinate system. In order to project the gaze data estimated relative to the user’s head in 3d, onto the screen plane, the screen has to be located and tracked relative to the user’s head (a.k.a. screen tracking). This is done by tracking the screen in the image captured by the front-facing camera. While various methods can be used for tracking the screen, the Adhawk eye tracking module does this by tracking one or multiple <a href="http://www.uco.es/investiga/grupos/ava/node/26">Aruco markers</a> displayed in the screen plane. This is done via <a href="https://docs.opencv.org/4.x/d5/dae/tutorial_aruco_detection.html">OpenCV</a> and taking advantage of the IMU sensor integrated on the Adhawk eye tracking glasses to track the head movements.</p><p>The first step you need to do before using the screen tracking feature is to prepare the screen setup as follows:</p><ul><li>Take a set of aruco markers from an <a href="https://docs.opencv.org/4.5.3/d9/d6a/group__aruco.html#gac84398a9ed9dd01306592dd616c2c975">aruco dictionary</a> and display them on the same plane as the screen. The markers can have different sizes, can be physical (printed on a piece of paper and glued to a cardboard to make it flat and rigid) or virtual (generated in the software and shown on a screen). The markers can be placed anywhere inside or outside the screen area. Make sure there is a white margin around each marker at least as big as the black border of the marker.</li><li>Make sure that all the markers are flat and oriented correctly in 3d such that all the 4 corners are placed in an imaginary plane that passes through the screen plane.</li><li>Measure the bottom-left corner of each marker relative to the origin <a href="#screen-coordinate-system">Screen Coordinate System</a> (top-left corner of the screen) in meters.</li></ul><p>Figure below shows an example with 4 markers and the measurement to take.</p><figure><img src="./assets/screen_coordinate_system.png" width="600" alt="" /><figcaption>Screen Coordinate System</figcaption></figure><p>In order to get the <a href="#gaze-in-screen-stream-0x08">gaze-in-screen</a> data, you need to register the aruco markers. Registering the screen markers can be done by sending a <a href="#register-screen-aruco-board-0xda">register screen</a> command that defines your screen size, aruco dictionary, index of each marker (as defined in the dictionary), the position of the bottom-left corner of each maker in the screen coordinate system, as well as the size of each marker in meters. Multiple markers can be added to the same packet. After the registering the screen, <a href="#screen-tracking-start-0xdb">enable screen tracking</a>, and subscribe to the <a href="#gaze-in-screen-stream-0x08">gaze-in-screen</a> stream. The Adhawk eye tracking module will stream the estimated gaze position inside your screen coordinate system as (timestamp, x, y) values where the timestamp matches the timestamp of the corresponding gaze vector stream and the (x, y) are normalized float values (0-1) where (0,0) is the top-left corner and (1, 1) is the bottom-right corner of the screen.</p><p><strong>Python</strong></p><div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="im">import</span> cv2</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="im">import</span> adhawkapi</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>aruco_dictionary <span class="op">=</span> cv2.aruco.DICT_5X5_50</span>
<span id="cb14-5"><a href="#cb14-5"></a>sceen_size <span class="op">=</span> (<span class="fl">0.345</span>, <span class="fl">0.195</span>)  <span class="co"># in meters</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>marker_size <span class="op">=</span> <span class="fl">0.03</span>  <span class="co"># in meters</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>marker_ids <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb14-8"><a href="#cb14-8"></a>markers_pos <span class="op">=</span> [[<span class="fl">0.0</span>, <span class="fl">0.12</span>], [<span class="fl">0.27</span>, <span class="fl">0.12</span>], [<span class="fl">0.0</span>, <span class="fl">0.0</span>], [<span class="fl">0.27</span>, <span class="fl">0.0</span>]]</span>
<span id="cb14-9"><a href="#cb14-9"></a></span>
<span id="cb14-10"><a href="#cb14-10"></a>api.register_screen_board(<span class="op">*</span>sceen_size, aruco_dictionary, marker_ids,</span>
<span id="cb14-11"><a href="#cb14-11"></a>                          [[pos[<span class="dv">0</span>], pos[<span class="dv">1</span>], marker_size] <span class="cf">for</span> pos <span class="kw">in</span> markers_pos])</span>
<span id="cb14-12"><a href="#cb14-12"></a>api.start_screen_tracking()</span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb14-14"><a href="#cb14-14"></a>    timestamp, xpos, ypos <span class="op">=</span> data</span>
<span id="cb14-15"><a href="#cb14-15"></a></span>
<span id="cb14-16"><a href="#cb14-16"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE_IN_SCREEN, handler)</span></code></pre></div></section></section><section id="api-reference" class="level1"><h1>API reference</h1><section id="control-packets" class="level2"><h2>Control packets</h2><section id="calibration-start-0x81" class="level3"><h3>Calibration start [0x81]</h3><p>A calibration start command packet will instruct AdHawk’s eye-tracking module to reset the calibration table and prepare for a new calibration procedure.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x81</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x81</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1"></a>ah_result ah_api_calibrationStart(<span class="dt">void</span>);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>api.start_calibration()</span></code></pre></div></details></section><section id="calibration-complete-0x82" class="level3"><h3>Calibration complete [0x82]</h3><p>A calibration complete command will instruct AdHawk’s eye-tracking module that no further points will be collected and that a new calibration should be generated. Once the Calibration complete packet is received the eye-tracking module will compute the calibration coefficients based on the correspondence of sensor data and gaze references. The AdHawk’s eye-tracking module will respond with a zero (0) return code for successful calibration, and a non-zero value if calibration fails.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x82</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x82</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb17"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb17-1"><a href="#cb17-1"></a>ah_result ah_api_calibrationComplete(<span class="dt">void</span>);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>api.stop_calibration()</span></code></pre></div></details></section><section id="calibration-abort-0x83" class="level3"><h3>Calibration abort [0x83]</h3><p>A calibration abort packet will instruct AdHawk’s eye-tracking module to discard all collected data for the new calibration, and restores the previous calibration.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x83</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x83</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1"></a>ah_result ah_api_calibrationAbort(<span class="dt">void</span>);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>api.abort_calibration()</span></code></pre></div></details></section><section id="register-calibration-point-0x84" class="level3"><h3>Register calibration point [0x84]</h3><p>Once a target gaze point is established and the user is instructed to direct their gaze at the target, a calibration data point may be registered. Registering a data point requires the client to instruct the eye-tracking module of the intended gaze target such that a correspondence can be established between the user’s gaze and the sensor data.</p><p>AdHawk’s eye-tracking module will respond with a zero (0) return code if the calibration point is successfully registered. Otherwise, a non-zero payload will be returned indicating that a correspondence between the user’s gaze and sensor data could not be established.</p><p>X, Y and Z is the position of the point relative to the midpoint of the scanners. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x84</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position in meters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position in meters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position in meters</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x84</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1"></a>ah_result ah_api_calibrationRegisterPoint(<span class="dt">float</span> xPos, <span class="dt">float</span> yPos, <span class="dt">float</span> zPos);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>api.register_calibration_point(<span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.179</span>, <span class="op">-</span><span class="fl">0.6</span>)</span></code></pre></div></details></section><section id="trigger-auto-tune-0x85" class="level3"><h3>Trigger Auto-tune [0x85]</h3><p>When trigger scanner ranging is signaled, the eye-tracking module will perform an auto-tune function on all attached trackers. The eye-tracking module will respond with a zero (0) to indicate that scanner ranging successfully completed on both eyes. Otherwise, a non-zero payload will indicate which eye encountered a failure.</p>The endpoint also supports an optional reference gaze vector within the payload. This reference gaze vector is an estimate of the world space position (in meters) that the user is looking at during the tuning process. Providing a reference gaze vector will increase the overall accuracy of the tuning process. This reference should be supplied whenever possible.<details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x85</td></tr><tr class="even"><td style="text-align: left;">Optional Payload</td><td style="text-align: left;">1-4</td><td style="text-align: left;">float</td><td style="text-align: left;">X component of Reference Gaze Vector</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float</td><td style="text-align: left;">Y component of Reference Gaze Vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float</td><td style="text-align: left;">Z component of Reference Gaze Vector</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x85</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1"></a>ah_result ah_api_runAutotune(ah_autotuneReferenceGazeVector *referenceGazeVec);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>api.trigger_autotune(reference_gaze_vector)</span></code></pre></div></details></section><section id="re-center-calibration-0x8f" class="level3"><h3>Re-center calibration [0x8f]</h3><p>Updates an existing calibration based on the specified calibration point. The payload of the calibration data point indicates the position of the gaze target.</p><p>X, Y and Z is the position of the point relative to the midpoint of the scanners. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x8f</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position in meters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position in meters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position in meters</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x8f</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1"></a>ah_result ah_api_calibrationRecenter(<span class="dt">float</span> xPos, <span class="dt">float</span> yPos, <span class="dt">float</span> zPos);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a>api.recenter_calibration(<span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.179</span>, <span class="op">-</span><span class="fl">0.6</span>)</span></code></pre></div></details></section><section id="get-tracker-status-0x90" class="level3"><h3>Get tracker status [0x90]</h3><p>Retrieves the current state of the eye-tracking module. A response value of zero (0) indicates that the tracker is calibrated and fully working.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x90</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x90</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1"></a>ah_result ah_api_getTrackerStatus(<span class="dt">void</span>);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="cf">try</span>:</span>
<span id="cb28-2"><a href="#cb28-2"></a>    api.get_tracker_status()</span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="cf">except</span> adhawkapi.APIRequestError <span class="im">as</span> exc:</span>
<span id="cb28-4"><a href="#cb28-4"></a>    <span class="bu">print</span>(exc)</span></code></pre></div><p>Note that this API returns the current tracker status, and will raise an exception in <a href="#Synchronous-vs-Aysnchronous-operation">synchronous mode</a> if the trackers are not ready.</p><p>We recommend registering for the <a href="#tracker-ready-0x02">tracker ready</a> stream, which will notify any changes in the tracker status.</p></details></section><section id="start-camera-0xd2" class="level3"><h3>Start camera [0xd2]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to turn on the front-facing camera.</p><details><p><summary>API</summary></p><table><colgroup><col style="width: 9%" /><col style="width: 5%" /><col style="width: 7%" /><col style="width: 77%" /></colgroup><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd2</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-2</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Camera device index</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">3-4</td><td style="text-align: left;">uint16</td><td style="text-align: left;"><a href="#camera-resolution">Image resolution index</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">5</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Undistort image (only recommended when a wide angle lens is used on the camera)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd2</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a>api.start_camera_capture(<span class="dv">0</span>, adhawkapi.CameraResolution.MEDIUM)</span></code></pre></div></details></section><section id="stop-camera-0xd3" class="level3"><h3>Stop camera [0xd3]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A stop command packet that will instruct AdHawk’s eye-tracking module to turn off the front-facing camera.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd3</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd3</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a>api.stop_camera_capture()</span></code></pre></div></details></section><section id="subscribe-to-video-stream-0xd4" class="level3"><h3>Subscribe to video stream [0xd4]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote>A command to subscribe to the video stream from the AdHawk front-facing camera. The receiver of the video needs to provide its IPv4 address and the port. See the example code in section <a href="#gaze-in-image">Gaze In Image</a> for how to setup a video receiver. Multiple receivers can subscribe to the video stream.<details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd4</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">bytes</td><td style="text-align: left;">IPv4 Address of the receiver</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-6</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Port of the receiver</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd4</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a>api.start_video_stream(<span class="st">&quot;192.168.0.1&quot;</span>, <span class="dv">62829</span>)</span></code></pre></div></details></section><section id="unsubscribe-from-video-stream-0xd5" class="level3"><h3>Unsubscribe from video stream [0xd5]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command to unsubscribe for the video steam of the front facing camera given the ip and the port information of an existing video receiver. See the example code in section <a href="#gaze-in-image">Gaze In Image</a> for how to setup a video receiver.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd5</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">bytes</td><td style="text-align: left;">IPv4 Address of the receiver</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-6</td><td style="text-align: left;">uint16</td><td style="text-align: left;">port Port of the receiver</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd5</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>api.stop_video_stream(<span class="st">&quot;192.168.0.1&quot;</span>, <span class="dv">62829</span>)</span></code></pre></div></details></section><section id="register-screen-aruco-board-0xda" class="level3"><h3>Register screen ArUco board [0xda]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A packet will instruct AdHawk’s eye-tracking module to reset any existing screen board defined for screen tracking and defines a new screen aruco board based on the given information. The packet includes the screen dimension (in meters), index of the aruco dictionary, and a set of markers (one or more) each defined by 3 float values indicating the bottom-left corner of the marker inside the board plane and the width of the marker. Multiple markers should be defined in the same packet. The coordinate system that is used to define the screen is located at the top-left corner of the screen with positive x axis toward the right and positive y axis upward. The bottom-left corner of each of the markers should be measured relative to that origin (in meters). Note that all the aruco markers should belong to the same <a href="https://docs.opencv.org/4.5.3/d9/d6a/group__aruco.html#gac84398a9ed9dd01306592dd616c2c975">aruco dictionary</a>.</p><details><p><summary>API</summary></p><table><colgroup><col style="width: 6%" /><col style="width: 4%" /><col style="width: 5%" /><col style="width: 84%" /></colgroup><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xda</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Width of the physical screen in meters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Height of the physical screen in meters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-10</td><td style="text-align: left;">uint16</td><td style="text-align: left;"><a href="https://docs.opencv.org/4.5.3/d9/d6a/group__aruco.html#gac84398a9ed9dd01306592dd616c2c975">Index of a OpenCV aruco predefined dictionary</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">11-12</td><td style="text-align: left;">uint16</td><td style="text-align: left;">id of the aruco marker in the given dictionary</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position of bottom-left corner of the marker in meters relative to the top-left corner of the screen</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position of bottom-left corner of the marker in meters relative to the top-left corner of the screen</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">21-24</td><td style="text-align: left;">float32</td><td style="text-align: left;">size (width) of the marker in meters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">… repeat 11-24 for as many markers as there are being registered</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xda</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># registering a screen defined by a 20 cm marker located at 0, 0</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>api.register_screen_board(cv2.aruco.DICT_5X5_50, [<span class="dv">1</span>], [[<span class="dv">0</span>,<span class="dv">0</span>, <span class="fl">0.02</span>]])</span></code></pre></div></details></section><section id="screen-tracking-start-0xdb" class="level3"><h3>Screen tracking start [0xdb]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to enable screen tracking once a screen has been <a href="#register-screen-aruco-board-0xda">registered</a>.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xdb</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xdb</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>api.start_screen_tracking()</span></code></pre></div></details></section><section id="screen-tracking-stop-0xdc" class="level3"><h3>Screen tracking stop [0xdc]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to stop screen tracking.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xdc</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xdc</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a>api.stop_screen_tracking()</span></code></pre></div></details></section></section><section id="run-time-configuration-objects-blobs" class="level2"><h2>Run-time configuration objects (blobs)</h2>The C SDK simplifies the use of blobs. This can be read / written to with the following APIs:<details><p><summary>C</summary></p><div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1"></a>ah_result ah_api_readBlob(ah_blobType blobType, <span class="dt">uint8_t</span> **blobData, <span class="dt">uint16_t</span> *blobSize);</span>
<span id="cb36-2"><a href="#cb36-2"></a></span>
<span id="cb36-3"><a href="#cb36-3"></a>ah_result ah_api_writeBlob(ah_blobType blobType, <span class="dt">uint8_t</span> *blobData, <span class="dt">uint16_t</span> blobSize);</span></code></pre></div></details><p>These functions use the appropriate commands detailed below.</p><section id="blob-size-0x92" class="level3"><h3>Blob size [0x92]</h3><p>Retrieves a run-time configuration object from the eye tracking module.</p><p>The client/host should get the size of the configuration object using <a href="#get-blob-size">get blob size</a> command, and allocate the required buffer size to store the configuration content. Then, the client/host can get the blob data in chunks of max 25 bytes using the <a href="#get-blob-data">get blob data</a> command until the entire configuration object is retrieved.</p><section id="get-blob-size" class="level4"><h4>Get blob size</h4><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x92</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x92</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">The size of the blob</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>errcode, blob_size <span class="op">=</span> api.get_blob_size()</span></code></pre></div></details></section><section id="set-blob-size" class="level4"><h4>Set blob size</h4><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x92</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">The size of the blob being written</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x92</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>api.set_blob_size(adhawkapi.BlobType.CALIBRATION, <span class="bu">len</span>(blob_data))</span></code></pre></div></details></section></section><section id="blob-data-0x93" class="level3"><h3>Blob data [0x93]</h3><p>Applies a run-time configuration object to the eye tracking module.</p><p>The client/host should set the size of the configuration object using the <a href="#set-blob-size">set blob size</a> command. This will cause the eye tracking module to allocate the required buffer size to store the configuration content.Then the client/host can set the blob data in chunks of max 25 bytes using the <a href="#set-blob-data">set blob data</a> command until the entire configuration object is written.</p><section id="get-blob-data" class="level4"><h4>Get blob data</h4><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x93</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">The byte offset</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x93</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">2..</td><td style="text-align: left;"></td><td style="text-align: left;">Blob data (max 25 bytes)</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>blob_type <span class="op">=</span> adhawkapi.BlobType.CALIBRATION</span>
<span id="cb39-2"><a href="#cb39-2"></a>_, size <span class="op">=</span> api.get_blob_size(blob_type)</span>
<span id="cb39-3"><a href="#cb39-3"></a>data <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> size</span>
<span id="cb39-4"><a href="#cb39-4"></a>offset <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb39-5"><a href="#cb39-5"></a></span>
<span id="cb39-6"><a href="#cb39-6"></a><span class="cf">while</span> offset <span class="op">&lt;=</span> size:</span>
<span id="cb39-7"><a href="#cb39-7"></a>    _, chunk <span class="op">=</span> api.get_blob_data(blob_type, offset)</span>
<span id="cb39-8"><a href="#cb39-8"></a>    chunk_size <span class="op">=</span> <span class="bu">len</span>(chunk)</span>
<span id="cb39-9"><a href="#cb39-9"></a>    data[offset:offset <span class="op">+</span> chunk_size] <span class="op">=</span> chunk</span>
<span id="cb39-10"><a href="#cb39-10"></a>    offset <span class="op">=</span> offset <span class="op">+</span> chunk_size</span>
<span id="cb39-11"><a href="#cb39-11"></a><span class="bu">print</span>(<span class="bu">bytes</span>(data))</span></code></pre></div></details></section><section id="set-blob-data" class="level4"><h4>Set blob data</h4><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x93</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">The byte offset</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">4..</td><td style="text-align: left;"></td><td style="text-align: left;">Blob data (max 25 bytes)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x93</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a><span class="kw">def</span> chunks(data):</span>
<span id="cb40-2"><a href="#cb40-2"></a>    <span class="co">&#39;&#39;&#39;Generator that breaks the data into chunks&#39;&#39;&#39;</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>    size <span class="op">=</span> <span class="bu">len</span>(data)</span>
<span id="cb40-4"><a href="#cb40-4"></a>    offset <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>    chunk_len <span class="op">=</span> adhawkapi.defaults.BLOB_CHUNK_LEN</span>
<span id="cb40-6"><a href="#cb40-6"></a>    <span class="cf">while</span> (offset <span class="op">+</span> chunk_len) <span class="op">&lt;=</span> size:</span>
<span id="cb40-7"><a href="#cb40-7"></a>        <span class="cf">yield</span> offset, data[offset:offset <span class="op">+</span> chunk_len]</span>
<span id="cb40-8"><a href="#cb40-8"></a>        offset <span class="op">=</span> offset <span class="op">+</span> chunk_len</span>
<span id="cb40-9"><a href="#cb40-9"></a>    <span class="cf">yield</span> offset, data[offset:]</span>
<span id="cb40-10"><a href="#cb40-10"></a></span>
<span id="cb40-11"><a href="#cb40-11"></a></span>
<span id="cb40-12"><a href="#cb40-12"></a>blob_type <span class="op">=</span> adhawkapi.BlobType.CALIBRATION</span>
<span id="cb40-13"><a href="#cb40-13"></a><span class="cf">for</span> offset, chunk <span class="kw">in</span> chunks(data):</span>
<span id="cb40-14"><a href="#cb40-14"></a>    api.set_blob_data(blob_type, offset, chunk)</span></code></pre></div></details></section></section><section id="load-blob-0x94" class="level3"><h3>Load blob [0x94]</h3><p>Applies a run-time configuration object to the eye tracking module. This is similar to writing a blob, except the data for the blob was previously <a href="#save-blob-0x95">saved</a> to disk in the AdHawk Backend folder under cache as blob_&lt;id&gt;.bin</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x94</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">uint32</td><td style="text-align: left;">ID of the blob to load</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x94</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># Loading a calibration blob that was previously saved under cache/blob_1241123630.bin</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>api.load_blob(adhawkapi.BlobType.CALIBRATION, <span class="dv">1241123630</span>)</span></code></pre></div></details></section><section id="save-blob-0x95" class="level3"><h3>Save blob [0x95]</h3><p>Retrieves and saves a run-time configuration object from the eye tracking module. This is similar to reading a blob, except that the blob data is stored within the eye tracking module to disk in the AdHawk Backend folder under cache as blob_<id>.bin, and the 32-bit unique identifier is returned to the clients for later use.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x95</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#blob-type">Blob type</a></td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x95</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">uint32</td><td style="text-align: left;">ID of the saved blob</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>errcode, blob_id <span class="op">=</span> api.save_blob(adhawkapi.BlobType.CALIBRATION)</span></code></pre></div></details></section></section><section id="properties" class="level2"><h2>Properties</h2><section id="get-autotune-position-0x9a-0x01" class="level3"><h3>Get autotune position [0x9a, 0x01]</h3><p>Get the center of the scan range. The returned values will be non-zero only if a <a href="#trigger-autotune-0x85">trigger autotune</a> command completed successfully or if the values were manually set through <a href="#set-autotune-position-0x9b-0x01">set autotune position</a></p><p>In the case of monocular operation, <code>0xFFFF</code> will be returned for the X mean and Y mean of the inactive eye</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-4</td><td style="text-align: left;">uint16</td><td style="text-align: left;">X mean (right eye), valid range is 0 - 100</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-6</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Y mean (right eye), valid range is 0 - 100</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">7-8</td><td style="text-align: left;">uint16</td><td style="text-align: left;">X mean (left eye), valid range is 0 - 100</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">9-10</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Y mean (left eye), valid range is 0 - 100</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1"></a>ah_result ah_api_getAutotunePosition(ah_autotunePosition pos[AH_NUM_EYES]);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a>right_xmean, right_ymean, left_xmean, left_ymean <span class="op">=</span> api.get_autotune_position()[<span class="dv">2</span>:]</span></code></pre></div></details></section><section id="set-autotune-position-0x9b-0x01" class="level3"><h3>Set autotune position [0x9b, 0x01]</h3><p>Set the center of the scan range.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">X mean (right eye), valid range is 0 - 100</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">4-5</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Y mean (right eye), valid range is 0 - 100</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">6-7</td><td style="text-align: left;">uint16</td><td style="text-align: left;">X mean (left eye), valid range is 0 - 100</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">7-8</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Y mean (left eye), valid range is 0 - 100</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="#cb45-1"></a>ah_result ah_api_setAutotunePosition(<span class="dt">const</span> ah_autotunePosition pos[AH_NUM_EYES]);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1"></a>api.set_autotune_position(right_xmean, right_ymean, left_xmean, left_ymean)</span></code></pre></div></details></section><section id="set-stream-control-0x9b-0x02" class="level3"><h3>Set stream control [0x9b, 0x02]</h3><p>Control the rate of a data stream. Setting the rate to 0 disables the stream.</p><details><p><summary>API</summary></p><table><colgroup><col style="width: 8%" /><col style="width: 4%" /><col style="width: 7%" /><col style="width: 79%" /></colgroup><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">uint32</td><td style="text-align: left;"><a href="#stream-control-bitmask">Stream control bitmask</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6-9</td><td style="text-align: left;">float32</td><td style="text-align: left;">Stream rate in Hz. A value of 0 will disable the stream. See <a href="#supported-rates">Supported rates</a></td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr></tbody></table><blockquote><p>Example: Sending <code>0x9b, 0x02, 1 &lt;&lt; 3, 60</code> enables the gaze stream and sets its rate to 60Hz. Sending <code>0x9b, 0x02, 1 &lt;&lt; 3, 0</code> disables the gaze stream.</p></blockquote></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1"></a>ah_result ah_api_setupStream(ah_streamType type, ah_streamRate rate, ah_streamCallback dataCb);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>api.set_stream_control(adhawkapi.PacketType.GAZE, <span class="dv">60</span>)</span></code></pre></div></details></section><section id="get-stream-control-0x9a-0x02" class="level3"><h3>Get stream control [0x9a, 0x02]</h3><p>Get the current rate of a data stream</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">0-3</td><td style="text-align: left;">uint32</td><td style="text-align: left;"><a href="#stream-control-bitmask">Stream control bitmask</a> (Only a single stream is allowed)</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float</td><td style="text-align: left;">Stream rate in Hz</td></tr></tbody></table><blockquote><p>Example: Sending <code>0x9a, 0x02, 1 &lt;&lt; 3</code> will return <code>0x9a, 0x0, 0x2, 60</code> indicating that the rate for the gaze stream is currently 60 Hz.</p></blockquote></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1"></a>ah_result ah_api_getStreamRate(ah_streamType type, ah_streamRate *streamRate);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1"></a>stream_rate <span class="op">=</span> api.get_stream_control(adhawkapi.PacketType.GAZE)[<span class="dv">2</span>]</span></code></pre></div></details></section><section id="get-component-offsets-0x9a-0x04" class="level3"><h3>Get component offsets [0x9a, 0x04]</h3><p>Get the currently configured component offsets. Component offsets can be used if the scanners are not in their nominal position. The offset is the position of the scanner relative to its nominal position. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset x in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">7-10</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset y in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">11-14</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset z in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">15-18</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset x in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">19-22</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset y in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">23-26</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset z in millimeters</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>rx, ry, rz, lx, ly, lz <span class="op">=</span> api.get_component_offsets()[<span class="dv">2</span>:]</span></code></pre></div></details></section><section id="set-component-offsets-0x9b-0x04" class="level3"><h3>Set component offsets [0x9b, 0x04]</h3><p>Configure the component offsets. Component offsets can be used if the scanners are not in their nominal position. The offset is the position of the scanner relative to its nominal position. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset x in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">7-10</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset y in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">11-14</td><td style="text-align: left;">float</td><td style="text-align: left;">right eye component offset z in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">15-18</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset x in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">19-22</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset y in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">23-26</td><td style="text-align: left;">float</td><td style="text-align: left;">left eye component offset z in millimeters</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a>api.set_component_offsets(rx, ry, rz, lx, ly, lz)</span></code></pre></div></details></section><section id="set-event-control-0x9b-0x05" class="level3"><h3>Set event control [0x9b, 0x05]</h3><p>Enable or disable an event stream.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x05</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">uint32</td><td style="text-align: left;"><a href="#event-control-bitmask">Event control bitmask</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01 to enable, 0x00 to disable</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9b</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x05</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a>api.set_event_control(event_control, <span class="dv">1</span>)</span></code></pre></div></details></section><section id="get-event-control-0x9a-0x05" class="level3"><h3>Get event control [0x9a, 0x05]</h3><p>Get the currently enabled event streams</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x05</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">uint32</td><td style="text-align: left;"><a href="#event-control-bitmask">Event control bitmask</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1"></a>enabled <span class="op">=</span> api.get_event_control(event_control)</span></code></pre></div></details></section><section id="get-normalized-eye-offsets-0x9a-0x09" class="level3"><h3>Get normalized eye offsets [0x9a, 0x09]</h3><p>Get the latest estimate of the eye offsets as measured from the nominal eye. The returned values will be valid only if a <a href="#trigger-autotune-0x85">trigger autotune</a> command completed successfully.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9a</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float32</td><td style="text-align: left;">right eye x offset in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">7-10</td><td style="text-align: left;">float32</td><td style="text-align: left;">right eye y offset in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">11-14</td><td style="text-align: left;">float32</td><td style="text-align: left;">right eye z offset in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">15-18</td><td style="text-align: left;">float32</td><td style="text-align: left;">left eye x offset in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">19-22</td><td style="text-align: left;">float32</td><td style="text-align: left;">left eye y offset in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">23-26</td><td style="text-align: left;">float32</td><td style="text-align: left;">left eye z offset in millimeters</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a>rx, ry, rz, lx, ly, lz <span class="op">=</span> api.get_normalized_eye_offsets()[<span class="dv">2</span>:]</span></code></pre></div></details></section></section><section id="system-control" class="level2"><h2>System control</h2><section id="enable-disable-eye-tracking-0x9c-0x01" class="level3"><h3>Enable / disable Eye Tracking [0x9c, 0x01]</h3><p>Either enable or disable eye tracking</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9c</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0 to disable eye tracking, 1 to enable eye tracking</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x9c</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="#cb56-1"></a>ah_result ah_api_enableTracking(<span class="dt">bool</span> enable);</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a>api.enable_tracking(<span class="va">True</span>)</span></code></pre></div></details></section></section><section id="device-setup-procedures" class="level2"><h2>Device setup procedures</h2><section id="trigger-device-calibration-0xb0-0x01" class="level3"><h3>Trigger device calibration [0xb0, 0x01]</h3><p>Begin a device calibration, which runs on all active trackers and restores tuning configurations to factory values. A response value of zero (0) indicates that the calibration has started successfully.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01 (<a href="#procedure-types">device calibration procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1"></a>api.trigger_device_calibration()</span></code></pre></div></details></section><section id="get-device-calibration-status-0xb1-0x01" class="level3"><h3>Get device calibration status [0xb1, 0x01]</h3><p>Retrieves the state of the current device calibration. If the calibration has not encountered an error, the returned value is an integer which indicates the progress of the current calibration, ranging from [0, 100], where 100 indicates the calibration has completed successfully.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb1</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01 (<a href="#procedure-types">device calibration procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb1</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3</td><td style="text-align: left;">uint8</td><td style="text-align: left;">progress percentage</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a>errcode, _, status <span class="op">=</span> api.get_device_calibration_status()</span></code></pre></div></details></section><section id="trigger-update-firmware-0xb0-0x02" class="level3"><h3>Trigger update firmware [0xb0, 0x02]</h3><p>Begin a firmware update. A response value of zero (0) indicates that the update has started successfully.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02 (<a href="#procedure-types">Update firmware procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a>api.trigger_update_firmware()</span></code></pre></div></details></section><section id="get-update-firmware-status-0xb1-0x02" class="level3"><h3>Get update firmware status [0xb1, 0x02]</h3><p>Retrieves the state of the current firmware update. If the update has not encountered an error, the returned value is an integer which indicates the progress of the update, ranging from [0, 100], where 100 indicates the update has completed successfully.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb1</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02 (<a href="#procedure-types">Update firmware procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb1</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3</td><td style="text-align: left;">uint8</td><td style="text-align: left;">progress percentage</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1"></a>errcode, _, status <span class="op">=</span> api.get_update_firmware_status()</span></code></pre></div></details></section></section><section id="marker-sequence-procedures" class="level2"><h2>Marker sequence procedures</h2><section id="calibration-gui-start-0xb0-0x03" class="level3"><h3>Calibration GUI start [0xb0, 0x03]</h3><p>Launch a calibration GUI provided by the AdHawk Backend Service to guide the user through a calibration procedure.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><colgroup><col style="width: 8%" /><col style="width: 6%" /><col style="width: 8%" /><col style="width: 76%" /></colgroup><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x03 (<a href="#procedure-types">Calibration procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#marker-sequence-mode">Marker sequence mode</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Number of calibration points</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">4-7</td><td style="text-align: left;">float32</td><td style="text-align: left;">Size of the marker in millimeter</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">8</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Randomize the sequence</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Horizontal grid span in degrees of field of view (only for fixed-gaze modes)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Vertical grid span in degrees of field of view (only for fixed-gaze modes)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">Horizontal shift of the grid in the user’s field of view (only for fixed-gaze modes)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">21-24</td><td style="text-align: left;">float32</td><td style="text-align: left;">Vertical shift of the grid in the user’s field of view (only for fixed-gaze modes)</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x03</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a>api.start_calibration_gui()</span></code></pre></div></details></section><section id="get-calibration-gui-status-0xb1-0x03" class="level3"><h3>Get calibration GUI status [0xb1, 0x03]</h3><blockquote><p>Not supported</p></blockquote></section><section id="validation-gui-start-0xb0-0x04" class="level3"><h3>Validation GUI start [0xb0, 0x04]</h3><p>Launch a validation GUI provided by the AdHawk Backend Service to guide the user through a validation procedure.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><colgroup><col style="width: 8%" /><col style="width: 6%" /><col style="width: 8%" /><col style="width: 76%" /></colgroup><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04 (<a href="#procedure-types">Validation procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#marker-sequence-mode">Marker sequence mode</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Number of rows in the grid</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">4</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Number of columns in the grid</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Size of the marker in millimeter</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">9</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Randomize the sequence</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">10-13</td><td style="text-align: left;">float32</td><td style="text-align: left;">Horizontal grid span in degrees of field of view (only for fixed-gaze modes)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">14-17</td><td style="text-align: left;">float32</td><td style="text-align: left;">Vertical grid span in degrees of field of view (only for fixed-gaze modes)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">18-21</td><td style="text-align: left;">float32</td><td style="text-align: left;">Horizontal shift of the grid in the user’s field of view (only for fixed-gaze modes)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">22-25</td><td style="text-align: left;">float32</td><td style="text-align: left;">Vertical shift of the grid in the user’s field of view (only for fixed-gaze modes)</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1"></a>api.start_validation_gui()</span></code></pre></div></details></section><section id="get-validation-gui-status-0xb1-0x04" class="level3"><h3>Get validation GUI status [0xb1, 0x04]</h3><blockquote><p>Not supported</p></blockquote></section><section id="auto-tune-gui-start-0xb0-0x05" class="level3"><h3>Auto-tune GUI start [0xb0, 0x05]</h3><p>Perform the autotune. A GUI is displayed to quickly tune the device.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x05 (<a href="#procedure-types">Autotune procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#marker-sequence-mode">Marker sequence mode</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float32</td><td style="text-align: left;">Size of the marker in millimeter</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x05</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1"></a>api.autotune_gui(mode<span class="op">=</span>adhawkapi.MarkerSequenceMode.FIXED_GAZE.value, marker_size_mm<span class="op">=</span><span class="dv">35</span>,)</span></code></pre></div></details></section><section id="get-auto-tune-gui-status-0xb1-0x05" class="level3"><h3>Get Auto-tune GUI status [0xb1, 0x05]</h3><blockquote><p>Not supported</p></blockquote></section><section id="quick-start-gui-start-0xb0-0x06" class="level3"><h3>Quick Start GUI start [0xb0, 0x06]</h3><p>Perform the quick-start procedure. A GUI is displayed to quickly tune and calibrate the device.</p><blockquote><p>Only supported when using the <a href="#backend-service">AdHawk Backend Service</a></p></blockquote><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x06 (<a href="#procedure-types">Quick Start procedure</a>)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#marker-sequence-mode">Marker sequence mode</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">3-6</td><td style="text-align: left;">float32</td><td style="text-align: left;">Size of the marker in millimeter</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">7</td><td style="text-align: left;">uint8</td><td style="text-align: left;">returning user</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xb0</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x06</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1"></a>api.quick_start_gui()</span></code></pre></div></details></section><section id="get-quick-start-gui-status-0xb1-0x06" class="level3"><h3>Get Quick Start GUI Status [0xb1, 0x06]</h3><blockquote><p>Not supported</p></blockquote></section></section><section id="camera-user-settings" class="level2"><h2>Camera user settings</h2><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to set various camera-related settings used when calculating the <a href="#gaze-in-image-stream-0x07">Gaze-in-image</a> or used when running the calibration/validation GUI provided by the AdHawk Backend Service that relies on the front-facing camera.</p><section id="set-gaze-depth-0xd0-0x01" class="level3"><h3>Set gaze depth [0xd0, 0x01]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to set the default gaze depth used when projecting the user’s gaze into the camera image. If not provided, the system uses a default value of 60 cm.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x01 <a href="#camera-user-setting-types">Camera user settings</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">gaze depth in meters</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1"></a>api.set_camera_user_settings(adhawkapi.CameraUserSettings.GAZE_DEPTH, <span class="fl">0.5</span>)</span></code></pre></div></details></section><section id="enabledisable-parallax-correction-0xd0-0x02" class="level3"><h3>Enable/disable parallax correction [0xd0, 0x02]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to enable or disable the parallax correction when projecting the user’s gaze into the camera image. If not provided, the system enables the parallax correction by default.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02 <a href="#camera-user-setting-types">Camera user settings</a></td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2</td><td style="text-align: left;">uint8</td><td style="text-align: left;">enable (1) or disable (0) the parallax correction</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1"></a>api.set_camera_user_settings(adhawkapi.CameraUserSettings.PARALLAX_CORRECTION, <span class="dv">1</span>)</span></code></pre></div></details></section><section id="set-sampling-duration-0xd0-0x03" class="level3"><h3>Set sampling duration [0xd0, 0x03]</h3><blockquote><p>Currently not supported in c sdk</p></blockquote><p>A command packet that will instruct AdHawk’s eye-tracking module to set the sampling duration used during calibration or validation done by the GUI provided by the AdHawk Backend Service. If not provided, the system uses a default value of 500 ms.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x03</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-3</td><td style="text-align: left;">uint16</td><td style="text-align: left;">Sampling duration in milliseconds <a href="#camera-user-setting-types">Camera user settings</a></td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xd0</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1"></a>api.set_camera_user_settings(adhawkapi.CameraUserSettings.SAMPLING_DURATION, <span class="dv">1000</span>)</span></code></pre></div></details></section></section><section id="backend-service-communication" class="level2"><h2>Backend service communication</h2><section id="register-endpoint-0xc0" class="level3"><h3>Register endpoint [0xc0]</h3><p>Register as an endpoint to start communication with the <a href="#backend-service">AdHawk Backend Service</a>.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint32</td><td style="text-align: left;">The UDP port of the peer</td></tr><tr class="odd"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc0</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><p>The packet construction is handled within the <code>start()</code> function of the frontendApi()</p><div class="sourceCode" id="cb69"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1"></a><span class="kw">def</span> on_connect(error):</span>
<span id="cb69-2"><a href="#cb69-2"></a>    <span class="cf">if</span> <span class="kw">not</span> error:</span>
<span id="cb69-3"><a href="#cb69-3"></a>        <span class="bu">print</span>(<span class="st">&#39;Connected to AdHawk Backend Service&#39;</span>)</span>
<span id="cb69-4"><a href="#cb69-4"></a></span>
<span id="cb69-5"><a href="#cb69-5"></a><span class="kw">def</span> on_disconnect(error):</span>
<span id="cb69-6"><a href="#cb69-6"></a>    <span class="bu">print</span>(<span class="st">&#39;Disconnected from AdHawk Backend Service&#39;</span>)</span>
<span id="cb69-7"><a href="#cb69-7"></a></span>
<span id="cb69-8"><a href="#cb69-8"></a>api.start(connect_cb<span class="op">=</span>on_connect, disconnect_cb<span class="op">=</span>on_disconnect)</span></code></pre></div></details></section><section id="deregister-endpoint-0xc2" class="level3"><h3>Deregister endpoint [0xc2]</h3><p>Deregister as an endpoint to stop communication with the <a href="#backend-service">AdHawk Backend Service</a></p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc2</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc2</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1"></a>api.shutdown()</span></code></pre></div></details></section><section id="ping-endpoint-0xc5" class="level3"><h3>Ping endpoint [0xc5]</h3><p>Must be used to ping the AdHawk backend service to indicate that the frontend is still alive, and to verify that the backend service is still reachable. Should be sent every 2s. This is automatically handled within the Python and C SDKs.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Request</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc5</td></tr><tr class="even"><td style="text-align: left;">Response</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0xc5</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;"><a href="#return-codes">Return code</a></td></tr></tbody></table></details><details><p><summary>Python</summary></p><blockquote><p>The <code>disconnect_cb</code> passed into <a href="#register-endpoint-0xc0">start</a> is executed if the pings aren’t successful</p></blockquote></details></section></section><section id="data-streams" class="level2"><h2>Data Streams</h2><section id="tracker-ready-0x02" class="level3"><h3>Tracker ready [0x02]</h3><p>The tracker ready packet type is an asynchronous status packet that is transmitted by AdHawk’s eye-tracking module when the system is ready to receive calibration commands. Once the tracker ready signal packet is received, the client/host system may go through a calibration process (send Calibration start, followed by Register calibration data point, and finally Calibration complete).</p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x02</td></tr></tbody></table><details><p><summary>Python</summary></p><div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1"></a>tracker_ready_signal <span class="op">=</span> threading.Event()</span>
<span id="cb71-2"><a href="#cb71-2"></a>api.register_stream_handler(adhawkapi.PacketType.TRACKER_READY, <span class="kw">lambda</span> <span class="op">*</span>args: tracker_ready_signal.<span class="bu">set</span>())</span>
<span id="cb71-3"><a href="#cb71-3"></a>tracker_ready_signal.wait()</span></code></pre></div></details></section><section id="gaze-vector-stream-0x03" class="level3"><h3>Gaze vector stream [0x03]</h3><p>X, Y and Z are the estimated coordinates of the user’s gaze point relative to the midpoint of the scanners. Vergence is the angle between left and right eye gaze vectors. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x03</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position in meters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position in meters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position in meters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">Vergence Angle in radians</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>{</span>
<span id="cb72-3"><a href="#cb72-3"></a>    <span class="dt">float</span> xPos;</span>
<span id="cb72-4"><a href="#cb72-4"></a>    <span class="dt">float</span> yPos;</span>
<span id="cb72-5"><a href="#cb72-5"></a>    <span class="dt">float</span> zPos;</span>
<span id="cb72-6"><a href="#cb72-6"></a>} ah_gazeData;</span></code></pre></div><div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb73-2"><a href="#cb73-2"></a>{</span>
<span id="cb73-3"><a href="#cb73-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb73-4"><a href="#cb73-4"></a>    ah_gazeData gaze;</span>
<span id="cb73-5"><a href="#cb73-5"></a>    <span class="dt">float</span> vergence;</span>
<span id="cb73-6"><a href="#cb73-6"></a>} ah_gazeStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb74-2"><a href="#cb74-2"></a>    timestamp, xpos, ypos, zpos, vergence <span class="op">=</span> data</span>
<span id="cb74-3"><a href="#cb74-3"></a></span>
<span id="cb74-4"><a href="#cb74-4"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE, handler)</span></code></pre></div></details></section><section id="pupil-position-stream-0x04" class="level3"><h3>Pupil position stream [0x04]</h3><p>X, Y and Z are coordinates of the pupil relative to the point between the center of the two (left and right) scanners. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><section id="binocular" class="level4"><h4>Binocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position of right pupil in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position of right pupil in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position of right pupil in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position of left pupil in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">21-24</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position of left pupil in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">25-28</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position of left pupil in millimeters</td></tr></tbody></table></section><section id="monocular" class="level4"><h4>Monocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X position of active pupil in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y position of active pupil in millimeters</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z position of active pupil in millimeters</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>{</span>
<span id="cb75-3"><a href="#cb75-3"></a>    <span class="dt">float</span> x;</span>
<span id="cb75-4"><a href="#cb75-4"></a>    <span class="dt">float</span> y;</span>
<span id="cb75-5"><a href="#cb75-5"></a>    <span class="dt">float</span> z;</span>
<span id="cb75-6"><a href="#cb75-6"></a>} ah_pupilPositionData;</span></code></pre></div><div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb76-2"><a href="#cb76-2"></a>{</span>
<span id="cb76-3"><a href="#cb76-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb76-4"><a href="#cb76-4"></a>    ah_pupilPositionData pos[AH_NUM_EYES];</span>
<span id="cb76-5"><a href="#cb76-5"></a>} ah_pupilPositionStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1"></a><span class="co"># Binocular</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb77-3"><a href="#cb77-3"></a>    timestamp, rx, ry, rz, lx, ly, lz <span class="op">=</span> data</span>
<span id="cb77-4"><a href="#cb77-4"></a></span>
<span id="cb77-5"><a href="#cb77-5"></a>api.register_stream_handler(adhawkapi.PacketType.PUPIL_POSITION, handler)</span></code></pre></div><div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1"></a><span class="co"># Monocular</span></span>
<span id="cb78-2"><a href="#cb78-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb78-3"><a href="#cb78-3"></a>    timestamp, x, y, z <span class="op">=</span> data</span>
<span id="cb78-4"><a href="#cb78-4"></a></span>
<span id="cb78-5"><a href="#cb78-5"></a>api.register_stream_handler(adhawkapi.PacketType.PUPIL_POSITION, handler)</span></code></pre></div></details></section></section><section id="pupil-diameter-stream-0x05" class="level3"><h3>Pupil diameter stream [0x05]</h3><p>The stream indicating the diameter of the pupil in millimeters</p><details><p><summary>API</summary></p><section id="binocular-1" class="level4"><h4>Binocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Diameter of right pupil in millimeters</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Diameter of left pupil in millimeters</td></tr></tbody></table></section><section id="monocular-1" class="level4"><h4>Monocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x04</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Diameter of active pupil in millimeters</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1"></a><span class="kw">struct</span> ah_pupilSizeStreamData</span>
<span id="cb79-2"><a href="#cb79-2"></a>{</span>
<span id="cb79-3"><a href="#cb79-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb79-4"><a href="#cb79-4"></a>    <span class="dt">float</span> diameter[AH_NUM_EYES];</span>
<span id="cb79-5"><a href="#cb79-5"></a>};</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1"></a><span class="co"># Binocular</span></span>
<span id="cb80-2"><a href="#cb80-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb80-3"><a href="#cb80-3"></a>    timestamp, right_pupil, left_pupil <span class="op">=</span> data</span>
<span id="cb80-4"><a href="#cb80-4"></a></span>
<span id="cb80-5"><a href="#cb80-5"></a>api.register_stream_handler(adhawkapi.PacketType.PUPIL_DIAMETER, handler)</span>
<span id="cb80-6"><a href="#cb80-6"></a>api.set_stream_control(adhawkapi.PacketType.PUPIL_DIAMETER, rate)</span></code></pre></div><div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1"></a><span class="co"># Monocular</span></span>
<span id="cb81-2"><a href="#cb81-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb81-3"><a href="#cb81-3"></a>    timestamp, pupil_diameter <span class="op">=</span> data</span>
<span id="cb81-4"><a href="#cb81-4"></a></span>
<span id="cb81-5"><a href="#cb81-5"></a>api.register_stream_handler(adhawkapi.PacketType.PUPIL_DIAMETER, handler)</span>
<span id="cb81-6"><a href="#cb81-6"></a>api.set_stream_control(adhawkapi.PacketType.PUPIL_DIAMETER, rate)</span></code></pre></div></details></section></section><section id="per-eye-gaze-vector-stream-0x06" class="level3"><h3>Per-eye gaze vector stream [0x06]</h3><p>X, Y and Z are the coordinates of a unit vector relative to the center of each eye. See <a href="#adhawk-coordinate-system">AdHawk Coordinate System</a> for details.</p><details><p><summary>API</summary></p><section id="binocular-2" class="level4"><h4>Binocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x06</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X component of right eye gaze unit vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y component of right eye gaze unit vector</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z component of right eye gaze unit vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">X component of left eye gaze unit vector</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">21-24</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y component of left eye gaze unit vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">25-28</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z component of left eye gaze unit vector</td></tr></tbody></table></section><section id="monocular-2" class="level4"><h4>Monocular</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x06</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start in seconds</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X component of active eye gaze unit vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y component of active eye gaze unit vector</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z component of active eye gaze unit vector</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>{</span>
<span id="cb82-3"><a href="#cb82-3"></a>    <span class="dt">float</span> xPos;</span>
<span id="cb82-4"><a href="#cb82-4"></a>    <span class="dt">float</span> yPos;</span>
<span id="cb82-5"><a href="#cb82-5"></a>    <span class="dt">float</span> zPos;</span>
<span id="cb82-6"><a href="#cb82-6"></a>} ah_gazeData;</span></code></pre></div><div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb83-2"><a href="#cb83-2"></a>{</span>
<span id="cb83-3"><a href="#cb83-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb83-4"><a href="#cb83-4"></a>    ah_gazeData gaze[AH_NUM_EYES];</span>
<span id="cb83-5"><a href="#cb83-5"></a>} ah_gazeStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1"></a><span class="co"># Binocular</span></span>
<span id="cb84-2"><a href="#cb84-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb84-3"><a href="#cb84-3"></a>    timestamp, rx, ry, rz, lx, ly, lz <span class="op">=</span> data</span>
<span id="cb84-4"><a href="#cb84-4"></a></span>
<span id="cb84-5"><a href="#cb84-5"></a>api.register_stream_handler(adhawkapi.PacketType.PER_EYE_GAZE, handler)</span></code></pre></div><div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1"></a><span class="co"># Monocular</span></span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb85-3"><a href="#cb85-3"></a>    timestamp, x, y, z <span class="op">=</span> data</span>
<span id="cb85-4"><a href="#cb85-4"></a></span>
<span id="cb85-5"><a href="#cb85-5"></a>api.register_stream_handler(adhawkapi.PacketType.PER_EYE_GAZE, handler)</span></code></pre></div></details></section></section><section id="gaze-in-image-stream-0x07" class="level3"><h3>Gaze in image stream [0x07]</h3><p>This stream provides the (x, y) coordinates of the gaze projection in the camera image (see <a href="#image-coordinate-system">Image Coordinate System</a>). The degree to pixels conversion coefficients are also included in the stream which are two values that indicate the equivalent pixel size (in the image) of a 1 degree of visual angle at the current gaze position.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x07</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">x coordinate in the image</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">y coordinate in the image</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">x degree to pixels</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">y degree to pixels</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb86-2"><a href="#cb86-2"></a>{</span>
<span id="cb86-3"><a href="#cb86-3"></a>    <span class="dt">float</span> x;</span>
<span id="cb86-4"><a href="#cb86-4"></a>    <span class="dt">float</span> y;</span>
<span id="cb86-5"><a href="#cb86-5"></a>    <span class="dt">float</span> xDegToPix;</span>
<span id="cb86-6"><a href="#cb86-6"></a>    <span class="dt">float</span> yDegToPix;</span>
<span id="cb86-7"><a href="#cb86-7"></a>} ah_gazeInImageData;</span></code></pre></div><div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb87-2"><a href="#cb87-2"></a>{</span>
<span id="cb87-3"><a href="#cb87-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb87-4"><a href="#cb87-4"></a>    ah_gazeInImageData gaze;</span>
<span id="cb87-5"><a href="#cb87-5"></a>} ah_gazeInImageStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb88-2"><a href="#cb88-2"></a>    timestamp, xpos, ypos, xdegtopix, ydegtopix <span class="op">=</span> data</span>
<span id="cb88-3"><a href="#cb88-3"></a>    <span class="co"># use degtopix values to draw a gaze marker of a size equivalent to k degrees of visual angle. For example:</span></span>
<span id="cb88-4"><a href="#cb88-4"></a>    <span class="co"># marker_size_deg = 1</span></span>
<span id="cb88-5"><a href="#cb88-5"></a>    <span class="co"># marker_width_pixel = marker_size_deg * xdegtopix</span></span>
<span id="cb88-6"><a href="#cb88-6"></a>    <span class="co"># marker_height_pixel = marker_size_deg * ydegtopix</span></span>
<span id="cb88-7"><a href="#cb88-7"></a></span>
<span id="cb88-8"><a href="#cb88-8"></a></span>
<span id="cb88-9"><a href="#cb88-9"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE_IN_IMAGE, handler)</span>
<span id="cb88-10"><a href="#cb88-10"></a>api.set_stream_control(adhawkapi.PacketType.GAZE_IN_IMAGE, <span class="dv">1</span>)</span></code></pre></div></details></section><section id="gaze-in-screen-stream-0x08" class="level3"><h3>Gaze in screen stream [0x08]</h3><p>This stream provides normalized (x, y) coordinates of the gaze inside the screen that was defined by a set of aruco markers. x and y are float values (0-1) where (0,0) is the top-left corner and (1, 1) is the bottom-right corner of the screen. See <a href="#register-screen-aruco-board-0xda">Register Screen Aruco Board</a> for more details.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x07</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">normalized x coordinate in the screen (value 0-1)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">normalized y coordinate in the screen (value 0-1)</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>{</span>
<span id="cb89-3"><a href="#cb89-3"></a>    <span class="dt">float</span> x;</span>
<span id="cb89-4"><a href="#cb89-4"></a>    <span class="dt">float</span> y;</span>
<span id="cb89-5"><a href="#cb89-5"></a>} ah_gazeInScreenData;</span></code></pre></div><div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb90-2"><a href="#cb90-2"></a>{</span>
<span id="cb90-3"><a href="#cb90-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb90-4"><a href="#cb90-4"></a>    ah_gazeInScreenData gaze;</span>
<span id="cb90-5"><a href="#cb90-5"></a>} ah_gazeInScreenStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb91-2"><a href="#cb91-2"></a>    timestamp, xpos, ypos <span class="op">=</span> data</span>
<span id="cb91-3"><a href="#cb91-3"></a></span>
<span id="cb91-4"><a href="#cb91-4"></a>api.register_stream_handler(adhawkapi.PacketType.GAZE_IN_SCREEN, handler)</span></code></pre></div></details></section><section id="imu-data-stream-0x17" class="level3"><h3>IMU data stream [0x17]</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x17</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">Gyro x (mdps)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Gyro y (mdps)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Gyro z (mdps)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">17-20</td><td style="text-align: left;">float32</td><td style="text-align: left;">Accelerometer x (mg)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">21-24</td><td style="text-align: left;">float32</td><td style="text-align: left;">Accelerometer y (mg)</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">25-28</td><td style="text-align: left;">float32</td><td style="text-align: left;">Accelerometer z (mg)</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb92-2"><a href="#cb92-2"></a>    timestamp, gx, gy, gz, accel_x, accel_y, accel_z <span class="op">=</span> data</span>
<span id="cb92-3"><a href="#cb92-3"></a></span>
<span id="cb92-4"><a href="#cb92-4"></a>api.register_stream_handler(adhawkapi.PacketType.IMU, handler)</span>
<span id="cb92-5"><a href="#cb92-5"></a>api.set_stream_control(adhawkapi.PacketType.IMU, rate)</span></code></pre></div></details></section><section id="imu-rotation-data-stream-0x19" class="level3"><h3>IMU rotation data stream [0x19]</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Stream</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x19</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1-4</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">5-8</td><td style="text-align: left;">float32</td><td style="text-align: left;">X component of the rotation vector</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">9-12</td><td style="text-align: left;">float32</td><td style="text-align: left;">Y component of the rotation vector</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">13-16</td><td style="text-align: left;">float32</td><td style="text-align: left;">Z component of the rotation vector</td></tr></tbody></table></details><details><p><summary>C</summary></p><p><em>Currently only available in UDP mode with backend</em></p><div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> __attribute__((__packed__))</span>
<span id="cb93-2"><a href="#cb93-2"></a>{</span>
<span id="cb93-3"><a href="#cb93-3"></a>    <span class="dt">float</span> timestamp;</span>
<span id="cb93-4"><a href="#cb93-4"></a>    <span class="dt">float</span> Xrvec;</span>
<span id="cb93-5"><a href="#cb93-5"></a>    <span class="dt">float</span> Yrvec;</span>
<span id="cb93-6"><a href="#cb93-6"></a>    <span class="dt">float</span> Zrvec;</span>
<span id="cb93-7"><a href="#cb93-7"></a>} ah_imuRotationStreamData;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb94"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1"></a><span class="kw">def</span> handler(<span class="op">*</span>data):</span>
<span id="cb94-2"><a href="#cb94-2"></a>    timestamp, rvec_x, rvec_y, rvec_z <span class="op">=</span> data</span>
<span id="cb94-3"><a href="#cb94-3"></a></span>
<span id="cb94-4"><a href="#cb94-4"></a>api.register_stream_handler(adhawkapi.PacketType.IMU_ROTATION, handler)</span>
<span id="cb94-5"><a href="#cb94-5"></a>api.set_stream_control(adhawkapi.PacketType.IMU_ROTATION, rate)</span></code></pre></div></details></section></section><section id="events" class="level2"><h2>Events</h2><section id="blink-events" class="level3"><h3>Blink events</h3><p>Consists of 3 different events: Combined-eye blink event Per-eye eye close event Per-eye eye open event</p><section id="blink-0x18-0x1" class="level4"><h4>Blink [0x18, 0x1]</h4><p>Combined-eye blink event when the user’s blink is detected on both eyes. More specifically, the blink event indicates the time window where both left and right blink events overlap in time. This event is triggered as soon as any of the closed eyes is opened.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x1 (Blink)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6-9</td><td style="text-align: left;">float32</td><td style="text-align: left;">Duration in ms</td></tr></tbody></table></details></section><section id="eye-closed-0x18-0x2" class="level4"><h4>Eye closed [0x18, 0x2]</h4><p>Eye close event indicating that the eye (specified in the eye index) is closed.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x2 (Eye Closed)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Eye index (right=0, left=1)</td></tr></tbody></table></details></section><section id="eye-opened-0x18-0x3" class="level4"><h4>Eye opened [0x18, 0x3]</h4><p>Eye open event indicating that the eye (specified in the eye index) is opened.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x3 (Eye Opened)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Eye index (right=0, left=1)</td></tr></tbody></table></details></section></section><section id="trackloss-events" class="level3"><h3>Trackloss events</h3><p>Event indicating a trackloss of an eye. Prolonged blinks (exceeding the defined maximum duration of the blink) may be detected as trackloss.</p><section id="trackloss-start-0x18-0x4" class="level4"><h4>Trackloss start [0x18, 0x4]</h4><p>Indicating the beginning of a trackloss event.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x4 (Track lost)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Eye index (right=0, left=1)</td></tr></tbody></table></details></section><section id="trackloss-end-0x18-0x5" class="level4"><h4>Trackloss end [0x18, 0x5]</h4><p>Indicating the end of a trackloss event triggered as soon as the eye features are detected.</p><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x5 (Eye detected)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp since system start</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6</td><td style="text-align: left;">uint8</td><td style="text-align: left;">Eye index (right=0, left=1)</td></tr></tbody></table></details></section></section><section id="saccade-events" class="level3"><h3>Saccade Events</h3><p>Combined-eye saccade event when a saccade is detected on both eyes. More specifically, the saccade event indicates the time window where both left and right saccade events overlap in time. This event is triggered as soon as the saccade in any of the eyes ends.</p><section id="saccade-0x18-0x6" class="level4"><h4>Saccade [0x18, 0x6]</h4><table><thead><tr class="header"><th style="text-align: left;"></th><th style="text-align: left;">Byte</th><th style="text-align: left;">Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Event</td><td style="text-align: left;">0</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x18</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">1</td><td style="text-align: left;">uint8</td><td style="text-align: left;">0x6 (Saccade)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">2-5</td><td style="text-align: left;">float32</td><td style="text-align: left;">Timestamp (since system start) of the end of the saccade</td></tr><tr class="even"><td style="text-align: left;"></td><td style="text-align: left;">6-9</td><td style="text-align: left;">float32</td><td style="text-align: left;">Duration (ms)</td></tr><tr class="odd"><td style="text-align: left;"></td><td style="text-align: left;">10-13</td><td style="text-align: left;">float32</td><td style="text-align: left;">Amplitude (deg)</td></tr></tbody></table></section></section></section><section id="types-reference" class="level2"><h2>Types reference</h2><section id="return-codes" class="level3"><h3>Return codes</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;">Response</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">0</td><td style="text-align: left;">Request successful</td></tr><tr class="even"><td style="text-align: left;">1</td><td style="text-align: left;">Internal failure</td></tr><tr class="odd"><td style="text-align: left;">2</td><td style="text-align: left;">Invalid argument</td></tr><tr class="even"><td style="text-align: left;">3</td><td style="text-align: left;">Tracker not ready</td></tr><tr class="odd"><td style="text-align: left;">4</td><td style="text-align: left;">No eyes detected</td></tr><tr class="even"><td style="text-align: left;">5</td><td style="text-align: left;">Right eye not detected</td></tr><tr class="odd"><td style="text-align: left;">6</td><td style="text-align: left;">Left eye not detected</td></tr><tr class="even"><td style="text-align: left;">7</td><td style="text-align: left;">Not calibrated</td></tr><tr class="odd"><td style="text-align: left;">8</td><td style="text-align: left;">Not supported</td></tr><tr class="even"><td style="text-align: left;">11</td><td style="text-align: left;">Request Timeout</td></tr><tr class="odd"><td style="text-align: left;">12</td><td style="text-align: left;">Unexpected Response</td></tr><tr class="even"><td style="text-align: left;">13</td><td style="text-align: left;">Hardware Fault</td></tr><tr class="odd"><td style="text-align: left;">14</td><td style="text-align: left;">Camera Fault</td></tr><tr class="even"><td style="text-align: left;">15</td><td style="text-align: left;">System Busy</td></tr><tr class="odd"><td style="text-align: left;">16</td><td style="text-align: left;">Communication Error</td></tr><tr class="even"><td style="text-align: left;">17</td><td style="text-align: left;">Device Calibration Required</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>{</span>
<span id="cb95-3"><a href="#cb95-3"></a>    ah_result_Success,</span>
<span id="cb95-4"><a href="#cb95-4"></a>    ah_result_Failure,</span>
<span id="cb95-5"><a href="#cb95-5"></a>    ah_result_InvalidArgument,</span>
<span id="cb95-6"><a href="#cb95-6"></a>    ah_result_TrackerNotReady,</span>
<span id="cb95-7"><a href="#cb95-7"></a>    ah_result_EyesNotFound,</span>
<span id="cb95-8"><a href="#cb95-8"></a>    ah_result_RightEyeNotFound,</span>
<span id="cb95-9"><a href="#cb95-9"></a>    ah_result_LeftEyeNotFound,</span>
<span id="cb95-10"><a href="#cb95-10"></a>    ah_result_NotCalibrated,</span>
<span id="cb95-11"><a href="#cb95-11"></a>    ah_result_NotSupported,</span>
<span id="cb95-12"><a href="#cb95-12"></a>    ah_result_SessionAlreadyRunning,</span>
<span id="cb95-13"><a href="#cb95-13"></a>    ah_result_NoCurrentSession,</span>
<span id="cb95-14"><a href="#cb95-14"></a>    ah_result_RequestTimeout,</span>
<span id="cb95-15"><a href="#cb95-15"></a>    ah_result_UnexpectedResponse,</span>
<span id="cb95-16"><a href="#cb95-16"></a>    ah_result_HardwareFault,</span>
<span id="cb95-17"><a href="#cb95-17"></a>    ah_result_CameraFault,</span>
<span id="cb95-18"><a href="#cb95-18"></a>    ah_result_Busy,</span>
<span id="cb95-19"><a href="#cb95-19"></a>    ah_result_CommunicationError,</span>
<span id="cb95-20"><a href="#cb95-20"></a>    ah_resultCode_DeviceCalibrationRequired,</span>
<span id="cb95-21"><a href="#cb95-21"></a>} ah_result;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1"></a><span class="kw">class</span> AckCodes(enum.IntEnum):</span>
<span id="cb96-2"><a href="#cb96-2"></a>    <span class="co">&#39;&#39;&#39;List of acknowledgement payload values&#39;&#39;&#39;</span></span>
<span id="cb96-3"><a href="#cb96-3"></a></span>
<span id="cb96-4"><a href="#cb96-4"></a>    SUCCESS <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb96-5"><a href="#cb96-5"></a>    FAILURE <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb96-6"><a href="#cb96-6"></a>    INVALID_ARGUMENT <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb96-7"><a href="#cb96-7"></a>    TRACKER_NOT_READY <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb96-8"><a href="#cb96-8"></a>    EYES_NOT_FOUND <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb96-9"><a href="#cb96-9"></a>    RIGHT_EYE_NOT_FOUND <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb96-10"><a href="#cb96-10"></a>    LEFT_EYE_NOT_FOUND <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb96-11"><a href="#cb96-11"></a>    NOT_CALIBRATED <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb96-12"><a href="#cb96-12"></a>    NOT_SUPPORTED <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb96-13"><a href="#cb96-13"></a>    SESSION_ALREADY_RUNNING <span class="op">=</span> <span class="dv">9</span></span>
<span id="cb96-14"><a href="#cb96-14"></a>    NO_CURRENT_SESSION <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb96-15"><a href="#cb96-15"></a>    REQUEST_TIMEOUT <span class="op">=</span> <span class="dv">11</span></span>
<span id="cb96-16"><a href="#cb96-16"></a>    UNEXPECTED_RESPONSE <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb96-17"><a href="#cb96-17"></a>    HARDWARE_FAULT <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb96-18"><a href="#cb96-18"></a>    CAMERA_FAULT <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb96-19"><a href="#cb96-19"></a>    BUSY <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb96-20"><a href="#cb96-20"></a>    COMMUNICATION_ERROR <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb96-21"><a href="#cb96-21"></a>    DEVICE_CALIBRATION_REQUIRED <span class="op">=</span> <span class="dv">17</span></span></code></pre></div></details></section><section id="stream-control-bitmask" class="level3"><h3>Stream control bitmask</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;">Bit</th><th style="text-align: left;">Stream Type</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td style="text-align: left;">Pupil position</td></tr><tr class="even"><td style="text-align: left;">2</td><td style="text-align: left;">Pupil diameter</td></tr><tr class="odd"><td style="text-align: left;">3</td><td style="text-align: left;">Gaze</td></tr><tr class="even"><td style="text-align: left;">4</td><td style="text-align: left;">Per Eye Gaze</td></tr><tr class="odd"><td style="text-align: left;">31</td><td style="text-align: left;">IMU</td></tr></tbody></table></details><details><p><summary>C</summary></p><div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb97-2"><a href="#cb97-2"></a>{</span>
<span id="cb97-3"><a href="#cb97-3"></a>    ah_streamType_Gaze,</span>
<span id="cb97-4"><a href="#cb97-4"></a>    ah_streamType_PupilPosition,</span>
<span id="cb97-5"><a href="#cb97-5"></a></span>
<span id="cb97-6"><a href="#cb97-6"></a>    ah_streamType_Count</span>
<span id="cb97-7"><a href="#cb97-7"></a>} ah_streamType;</span></code></pre></div></details></section><section id="event-control-bitmask" class="level3"><h3>Event control bitmask</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;">Bit</th><th style="text-align: left;">Stream Type</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">0</td><td style="text-align: left;">Blink</td></tr><tr class="even"><td style="text-align: left;">1</td><td style="text-align: left;">Eye open / close</td></tr><tr class="odd"><td style="text-align: left;">2</td><td style="text-align: left;">Trackloss start / end</td></tr><tr class="even"><td style="text-align: left;">3</td><td style="text-align: left;">Saccade</td></tr><tr class="odd"><td style="text-align: left;">7</td><td style="text-align: left;">External Trigger</td></tr></tbody></table></details></section><section id="blob-type" class="level3"><h3>Blob type</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;">Blob Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td style="text-align: left;">Gaze calibration data</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb98"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1"></a><span class="kw">class</span> BlobType(enum.IntEnum):</span>
<span id="cb98-2"><a href="#cb98-2"></a>    <span class="co">&#39;&#39;&#39;Enum representing set of blob types&#39;&#39;&#39;</span></span>
<span id="cb98-3"><a href="#cb98-3"></a>    CALIBRATION <span class="op">=</span> <span class="dv">1</span></span></code></pre></div></details></section><section id="supported-rates" class="level3"><h3>Supported rates</h3><p>The current listed of supported stream rates are: 5, 30, 60, 125, 200, 250, 333, 500</p><details><p><summary>C</summary></p><div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>{</span>
<span id="cb99-3"><a href="#cb99-3"></a>    ah_streamRate_Off,</span>
<span id="cb99-4"><a href="#cb99-4"></a>    ah_streamRate_5Hz,</span>
<span id="cb99-5"><a href="#cb99-5"></a>    ah_streamRate_30Hz,</span>
<span id="cb99-6"><a href="#cb99-6"></a>    ah_streamRate_60Hz,</span>
<span id="cb99-7"><a href="#cb99-7"></a>    ah_streamRate_125Hz,</span>
<span id="cb99-8"><a href="#cb99-8"></a>    ah_streamRate_200Hz,</span>
<span id="cb99-9"><a href="#cb99-9"></a>    ah_streamRate_250Hz,</span>
<span id="cb99-10"><a href="#cb99-10"></a>    ah_streamRate_333Hz,</span>
<span id="cb99-11"><a href="#cb99-11"></a>    ah_streamRate_500Hz,</span>
<span id="cb99-12"><a href="#cb99-12"></a></span>
<span id="cb99-13"><a href="#cb99-13"></a>    ah_streamRate_Count,</span>
<span id="cb99-14"><a href="#cb99-14"></a>} ah_streamRate;</span></code></pre></div></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb100"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1"></a><span class="kw">class</span> StreamRates(enum.IntEnum):</span>
<span id="cb100-2"><a href="#cb100-2"></a>    <span class="co">&#39;&#39;&#39;Enum representing the set of supported rates&#39;&#39;&#39;</span></span>
<span id="cb100-3"><a href="#cb100-3"></a>    OFF <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb100-4"><a href="#cb100-4"></a>    RATE_5 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb100-5"><a href="#cb100-5"></a>    RATE_30 <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb100-6"><a href="#cb100-6"></a>    RATE_60 <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb100-7"><a href="#cb100-7"></a>    RATE_125 <span class="op">=</span> <span class="dv">125</span></span>
<span id="cb100-8"><a href="#cb100-8"></a>    RATE_200 <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb100-9"><a href="#cb100-9"></a>    RATE_250 <span class="op">=</span> <span class="dv">250</span></span>
<span id="cb100-10"><a href="#cb100-10"></a>    RATE_333 <span class="op">=</span> <span class="dv">333</span></span>
<span id="cb100-11"><a href="#cb100-11"></a>    RATE_500 <span class="op">=</span> <span class="dv">500</span></span></code></pre></div></details></section><section id="camera-resolution" class="level3"><h3>Camera resolution</h3><table><thead><tr class="header"><th style="text-align: left;">Resolution index</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">0</td><td style="text-align: left;">Low</td></tr><tr class="even"><td style="text-align: left;">1</td><td style="text-align: left;">Medium</td></tr><tr class="odd"><td style="text-align: left;">2</td><td style="text-align: left;">High</td></tr></tbody></table></section><section id="procedure-types" class="level3"><h3>Procedure types</h3><details><p><summary>API</summary></p><table><thead><tr class="header"><th style="text-align: left;">Procedure Type</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td style="text-align: left;">Device calibration</td></tr><tr class="even"><td style="text-align: left;">2</td><td style="text-align: left;">Firmware update</td></tr><tr class="odd"><td style="text-align: left;">3</td><td style="text-align: left;">Backend service built-in calibration procedure with GUI</td></tr><tr class="even"><td style="text-align: left;">4</td><td style="text-align: left;">Backend service built-in validation procedure with GUI</td></tr><tr class="odd"><td style="text-align: left;">5</td><td style="text-align: left;">Backend service built-in autotune procedure with GUI</td></tr><tr class="even"><td style="text-align: left;">6</td><td style="text-align: left;">Backend service built-in quickstart procedure with GUI</td></tr></tbody></table></details><details><p><summary>Python</summary></p><div class="sourceCode" id="cb101"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1"></a><span class="kw">class</span> ProcedureType(enum.IntEnum):</span>
<span id="cb101-2"><a href="#cb101-2"></a>    <span class="co">&#39;&#39;&#39; Enum representing set of procedure types &#39;&#39;&#39;</span></span>
<span id="cb101-3"><a href="#cb101-3"></a></span>
<span id="cb101-4"><a href="#cb101-4"></a>    DEVICE_CALIBRATION <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb101-5"><a href="#cb101-5"></a>    UPDATE_FIRMWARE <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb101-6"><a href="#cb101-6"></a>    CALIBRATION_GUI <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb101-7"><a href="#cb101-7"></a>    VALIDATION_GUI <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb101-8"><a href="#cb101-8"></a>    AUTOTUNE_GUI <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb101-9"><a href="#cb101-9"></a>    QUICKSTART_GUI <span class="op">=</span> <span class="dv">6</span></span></code></pre></div></details></section><section id="marker-sequence-mode" class="level3"><h3>Marker sequence mode</h3><p>The marker sequence GUI used during the backend gaze calibration procedure <a href="#marker-sequence-procedures">Marker Sequence Procedures</a> can be launched in 4 modes (fixed-head or fixed-gaze modes where each can be either single marker or 4-markers). All of these modes show a set of visual markers in the screen and a small target for the user to fixate on when taking samples.</p><table><thead><tr class="header"><th style="text-align: left;">Mode index</th><th style="text-align: left;">Name</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">0</td><td style="text-align: left;">Fixed-head</td></tr><tr class="even"><td style="text-align: left;">1</td><td style="text-align: left;">Fixed-gaze</td></tr><tr class="odd"><td style="text-align: left;">2</td><td style="text-align: left;">Fixed-head with 4 markers</td></tr><tr class="even"><td style="text-align: left;">3</td><td style="text-align: left;">Fixed-gaze with 4 markers</td></tr></tbody></table><p><em>Fixed-head</em>: A sequence of markers with a fixation target at the center will be shown on the screen and the user needs to look at the center of the target (while keeping their head still) and register a sample by pressing one of <em>enter</em>, <em>return</em>, or <em>space</em> keys.</p><p><em>Fixed-gaze</em>: A sequence of markers will be shown at the center of the screen as well as an outline shape that moves on the screen as the user rotates their head. The user needs to align the outline shape with the target at the center while fixating at the center of the target. The user can then register the calibration sample by pressing the <em>space</em> key.</p><p><em>4-marker modes</em>: The sampling procedure in these modes are identical to their corresponding above-mentioned modes. The only difference is that 4 markers will be displayed at the 4 corners of the screen, and they are separated from the fixation target. Use the 4-marker modes if the user finds focusing on the center of the aruco marker distracting.</p></section><section id="camera-user-setting-types" class="level3"><h3>Camera user setting types</h3><p>Various camera-related settings used when calculating the <a href="#gaze-in-image-stream-0x07">Gaze-in-image</a> or when running the built-in Calibration GUI provided by the AdHawk Backend Service (which relies on the camera).</p><table><thead><tr class="header"><th style="text-align: left;">Setting index</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td style="text-align: left;">Gaze depth</td></tr><tr class="even"><td style="text-align: left;">2</td><td style="text-align: left;">Parallax correction</td></tr><tr class="odd"><td style="text-align: left;">3</td><td style="text-align: left;">Sampling duration</td></tr></tbody></table></section></section></section><section id="extended-usage-notes" class="level1"><h1>Extended usage notes</h1><section id="python-sdk-1" class="level2"><h2>Python SDK</h2><section id="synchronous-vs-asynchronous-operation" class="level3"><h3>Synchronous vs asynchronous operation</h3><p>In the Python SDK, you can chose to make the API calls blocking or non-blocking. To perform a non-blocking operation, provide a callback function as a parameter to be executed when the operation is complete. This mode of operation is useful for GUI applications. If a callback function is not provided, the call blocks till a response is received and returns the response on success or raises an exception on failure.</p><div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1"></a><span class="co"># blocking operation</span></span>
<span id="cb102-2"><a href="#cb102-2"></a><span class="cf">try</span>:</span>
<span id="cb102-3"><a href="#cb102-3"></a>    api.trigger_autotune()</span>
<span id="cb102-4"><a href="#cb102-4"></a><span class="cf">except</span> adhawkapi.APIRequestError <span class="im">as</span> err:</span>
<span id="cb102-5"><a href="#cb102-5"></a>    <span class="bu">print</span>(err.ackcode)</span></code></pre></div><div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># non-blocking operation</span></span>
<span id="cb103-2"><a href="#cb103-2"></a><span class="kw">def</span> on_autotune_complete(errcode):</span>
<span id="cb103-3"><a href="#cb103-3"></a>    <span class="cf">if</span> errcode <span class="op">==</span> adhawkapi.AckCodes.SUCCESS:</span>
<span id="cb103-4"><a href="#cb103-4"></a>        <span class="bu">print</span>(<span class="st">&#39;Autotune complete&#39;</span>)</span>
<span id="cb103-5"><a href="#cb103-5"></a>    <span class="cf">else</span>:</span>
<span id="cb103-6"><a href="#cb103-6"></a>        <span class="bu">print</span>(<span class="ss">f&#39;Autotune failed: </span><span class="sc">{</span>adhawkapi<span class="sc">.</span>errormsg(response)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb103-7"><a href="#cb103-7"></a></span>
<span id="cb103-8"><a href="#cb103-8"></a>api.trigger_autotune(callback<span class="op">=</span>on_autotune_complete)</span></code></pre></div></section></section></section><section id="adhawk-coordinate-system" class="level1"><h1>AdHawk coordinate system</h1><figure><img src="./assets/coordinate_system.png" width="200" alt="" /><figcaption>Coordinate System</figcaption></figure><p>In the AdHawk coordinate system X, Y and Z are coordinates relative to a particular origin where:</p><ul><li>X is oriented in the positive direction to the right (user’s point of view)</li><li>Y is oriented in the positive direction going up</li><li>Z is oriented in the positive direction when behind the user</li></ul><p>The origin is specific to the stream or command and is the same whether operating in monocular or binocular mode. In general the origin is either:</p><ul><li>The midpoint of the scanners</li><li>The cyclopean eye</li><li>The center of the eye</li></ul><figure><img src="./assets/origin.png" width="600" alt="" /><figcaption>Origin</figcaption></figure><table><thead><tr class="header"><th style="text-align: left;">Stream</th><th style="text-align: left;">Origin</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><a href="#gaze-vector-stream-0x03">Gaze Vector</a></td><td style="text-align: left;">Midpoint of scanners</td></tr><tr class="even"><td style="text-align: left;"><a href="#pupil-position-stream-0x04">Pupil Position</a></td><td style="text-align: left;">Midpoint of scanners</td></tr><tr class="odd"><td style="text-align: left;"><a href="#pupil-position-stream-0x04">Per-Eye Gaze Vector</a></td><td style="text-align: left;">Center of eye</td></tr></tbody></table><section id="image-coordinate-system" class="level2"><h2>Image coordinate system</h2><p>In the image coordinate system, X and Y are coordinates relative to the top-left corner of the image where:</p><ul><li>X is oriented in the positive direction to the right</li><li>Y is oriented in the positive direction going down</li></ul></section><section id="screen-coordinate-system" class="level2"><h2>Screen coordinate system</h2><p>In the image coordinate system, X and Y are coordinates relative to the top-left corner of the screen where:</p><ul><li>X is oriented in the positive direction to the right (user’s point of view)</li><li>Y is oriented in the positive direction going up</li></ul></section></section><section id="changelog" class="level1"><h1>Changelog</h1><section id="v5.8" class="level2"><h2>v5.8</h2><ul><li>Added Screen Tracking APIs:<ul><li><a href="#start-camera-0xd2">Start Camera</a></li><li><a href="#stop-camera-0xd3">Stop Camera</a></li><li><a href="#subscribe-for-video-stream-0xd4">Subscribe to Video Stream</a></li><li><a href="#unsubscribe-from-video-stream-0xd5">Unsubscribe to Video Stream</a></li><li><a href="#register-screen-aruco-board-0xda">Register Screen Aruco Board</a></li><li><a href="#screen-tracking-start-0xdb">Screen tracking start</a></li><li><a href="#screen-tracking-stop-0xdc">Screen tracking stop</a></li><li><a href="#calibration-gui-start-0xb0-0x03">Calibration GUI Start</a></li><li><a href="#validation-gui-start-0xb0-0x04">Validation GUI Start</a></li><li><a href="#autotune-gui-start-0xb0-0x05">Autotune GUI Start</a></li><li><a href="#quick-start-gui-start-0xb0-0x06">Quick Start GUI Start</a></li><li><a href="#gaze-in-image-stream-0x07">Gaze in image stream</a></li><li><a href="#gaze-in-screen-stream-0x08">Gaze in screen stream</a></li></ul></li><li>Added <a href="#get-normalized-eye-offsets-0x9a-0x09">Normalized Eye Offsets property</a></li></ul></section><section id="v5.9" class="level2"><h2>v5.9</h2><ul><li>Added support for gaze reference vector input for autotune<ul><li><a href="#trigger-autotune-0x85">Trigger Autotune</a></li></ul></li></ul></section><section id="v5.11" class="level2"><h2>v5.11</h2><ul><li>Added support for 5Hz stream rate<ul><li><a href="#supported-rates">Supported Rates</a></li></ul></li><li>Added saccade events<ul><li><a href="#saccade-events">Saccade Events</a></li></ul></li></ul></section></section>
      <footer>
        <p>Copyright 2022 AdHawk Microsystems Inc</p>
        <p>STRICTLY CONFIDENTIAL</p>
      </footer>
    </div>
  </div>
  <div>
      </div>
</body>
</html>
